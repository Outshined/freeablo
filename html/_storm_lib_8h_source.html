<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>freeablo: extern/StormLib/src/StormLib.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">freeablo
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">extern/StormLib/src/StormLib.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_storm_lib_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************************/</span>
<a name="l00002"></a>00002 <span class="comment">/* StormLib.h                        Copyright (c) Ladislav Zezula 1999-2010 */</span>
<a name="l00003"></a>00003 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00004"></a>00004 <span class="comment">/* StormLib library v 7.02                                                   */</span>
<a name="l00005"></a>00005 <span class="comment">/*                                                                           */</span>
<a name="l00006"></a>00006 <span class="comment">/* Author : Ladislav Zezula                                                  */</span>
<a name="l00007"></a>00007 <span class="comment">/* E-mail : ladik@zezula.net                                                 */</span>
<a name="l00008"></a>00008 <span class="comment">/* WWW    : http://www.zezula.net                                            */</span>
<a name="l00009"></a>00009 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00010"></a>00010 <span class="comment">/*   Date    Ver   Who  Comment                                              */</span>
<a name="l00011"></a>00011 <span class="comment">/* --------  ----  ---  -------                                              */</span>
<a name="l00012"></a>00012 <span class="comment">/* xx.xx.99  1.00  Lad  Created                                              */</span>
<a name="l00013"></a>00013 <span class="comment">/* 24.03.03  2.50  Lad  Version 2.50                                         */</span>
<a name="l00014"></a>00014 <span class="comment">/* 02.04.03  3.00  Lad  Version 3.00 with compression                        */</span>
<a name="l00015"></a>00015 <span class="comment">/* 11.04.03  3.01  Lad  Renamed to StormLib.h for compatibility with         */</span>
<a name="l00016"></a>00016 <span class="comment">/*                      original headers for Storm.dll                       */</span>
<a name="l00017"></a>00017 <span class="comment">/* 10.05.03  3.02  Lad  Added Pkware DCL compression                         */</span>
<a name="l00018"></a>00018 <span class="comment">/* 26.05.03  4.00  Lad  Completed all compressions                           */</span>
<a name="l00019"></a>00019 <span class="comment">/* 18.06.03  4.01  Lad  Added SFileSetFileLocale                             */</span>
<a name="l00020"></a>00020 <span class="comment">/*                      Added SFileExtractFile                               */</span>
<a name="l00021"></a>00021 <span class="comment">/* 26.07.03  4.02  Lad  Implemented nameless rename and delete               */</span>
<a name="l00022"></a>00022 <span class="comment">/* 26.07.03  4.03  Lad  Added support for protected MPQs                     */</span>
<a name="l00023"></a>00023 <span class="comment">/* 28.08.03  4.10  Lad  Fixed bugs that caused StormLib incorrectly work     */</span>
<a name="l00024"></a>00024 <span class="comment">/*                      with Diablo I savegames and with files having full   */</span>
<a name="l00025"></a>00025 <span class="comment">/*                      hash table                                           */</span>
<a name="l00026"></a>00026 <span class="comment">/* 08.12.03  4.11  DCH  Fixed bug in reading file sector larger than 0x1000  */</span>
<a name="l00027"></a>00027 <span class="comment">/*                      on certain files.                                    */</span>
<a name="l00028"></a>00028 <span class="comment">/*                      Fixed bug in AddFile with MPQ_FILE_REPLACE_EXISTING  */</span>
<a name="l00029"></a>00029 <span class="comment">/*                      (Thanx Daniel Chiamarello, dchiamarello@madvawes.com)*/</span>
<a name="l00030"></a>00030 <span class="comment">/* 21.12.03  4.50  Lad  Completed port for Mac                               */</span>
<a name="l00031"></a>00031 <span class="comment">/*                      Fixed bug in compacting (if fsize is mul of 0x1000)  */</span>
<a name="l00032"></a>00032 <span class="comment">/*                      Fixed bug in SCompCompress                           */</span>
<a name="l00033"></a>00033 <span class="comment">/* 27.05.04  4.51  Lad  Changed memory management from new/delete to our     */</span>
<a name="l00034"></a>00034 <span class="comment">/*                      own macros                                           */</span>
<a name="l00035"></a>00035 <span class="comment">/* 22.06.04  4.60  Lad  Optimized search. Support for multiple listfiles.    */</span>
<a name="l00036"></a>00036 <span class="comment">/* 30.09.04  4.61  Lad  Fixed some bugs (Aaargh !!!)                         */</span>
<a name="l00037"></a>00037 <span class="comment">/*                      Correctly works if HashTableSize &gt; BlockTableSize    */</span>
<a name="l00038"></a>00038 <span class="comment">/* 29.12.04  4.70  Lad  Fixed compatibility problem with MPQs from WoW       */</span>
<a name="l00039"></a>00039 <span class="comment">/* 14.07.05  5.00  Lad  Added the BZLIB compression support                  */</span>
<a name="l00040"></a>00040 <span class="comment">/*                      Added suport of files stored as single unit          */</span>
<a name="l00041"></a>00041 <span class="comment">/* 17.04.06  5.01  Lad  Converted to MS Visual Studio 8.0                    */</span>
<a name="l00042"></a>00042 <span class="comment">/*                      Fixed issue with protected Warcraft 3 protected maps */</span>
<a name="l00043"></a>00043 <span class="comment">/* 15.05.06  5.02  Lad  Fixed issue with WoW 1.10+                           */</span>
<a name="l00044"></a>00044 <span class="comment">/* 07.09.06  5.10  Lad  Fixed processing files longer than 2GB               */</span>
<a name="l00045"></a>00045 <span class="comment">/* 22.11.06  6.00  Lad  Support for MPQ archives V2                          */</span>
<a name="l00046"></a>00046 <span class="comment">/* 12.06.07  6.10  Lad  Support for (attributes) file                        */</span>
<a name="l00047"></a>00047 <span class="comment">/* 10.09.07  6.12  Lad  Support for MPQs protected by corrupting hash table  */</span>
<a name="l00048"></a>00048 <span class="comment">/* 03.12.07  6.13  Lad  Support for MPQs with hash tbl size &gt; block tbl size */</span>
<a name="l00049"></a>00049 <span class="comment">/* 07.04.08  6.20  Lad  Added SFileFlushArchive                              */</span>
<a name="l00050"></a>00050 <span class="comment">/* 09.04.08        Lad  Removed FilePointer variable from MPQ handle         */</span>
<a name="l00051"></a>00051 <span class="comment">/*                      structure, as it caused more problems than benefits  */</span>
<a name="l00052"></a>00052 <span class="comment">/* 12.05.08  6.22  Lad  Support for w3xMaster map protector                  */</span>
<a name="l00053"></a>00053 <span class="comment">/* 05.10.08  6.23  Lad  Support for protectors who set negative values in    */</span>
<a name="l00054"></a>00054 <span class="comment">/*                      the table of file blocks                             */</span>
<a name="l00055"></a>00055 <span class="comment">/* 26.05.09  6.24  Lad  Fixed search for multiple lang files with deleted    */</span>
<a name="l00056"></a>00056 <span class="comment">/*                      entries                                              */</span>
<a name="l00057"></a>00057 <span class="comment">/* 03.09.09  6.25  Lad  Fixed decompression bug in huffmann decompression    */</span>
<a name="l00058"></a>00058 <span class="comment">/* 22.03.10  6.50  Lad  New compressions in Starcraft II (LZMA, sparse)      */</span>
<a name="l00059"></a>00059 <span class="comment">/*                      Fixed compacting MPQs that contain single unit files */</span>
<a name="l00060"></a>00060 <span class="comment">/* 26.04.10  7.00  Lad  Major rewrite                                        */</span>
<a name="l00061"></a>00061 <span class="comment">/* 08.06.10  7.10  Lad  Support for partial MPQs                             */</span>
<a name="l00062"></a>00062 <span class="comment">/* 08.07.10  7.11  Lad  Support for MPQs v 3.0                               */</span>
<a name="l00063"></a>00063 <span class="comment">/* 20.08.10  7.20  Lad  Support for opening multiple MPQs in patch mode      */</span>
<a name="l00064"></a>00064 <span class="comment">/* 20.09.10  8.00  Lad  MPQs v 4, HET and BET tables                         */</span>
<a name="l00065"></a>00065 <span class="comment">/* 07.01.11  8.01  Lad  Write support for MPQs v 3 and 4                     */</span>
<a name="l00066"></a>00066 <span class="comment">/* 15.09.11  8.04  Lad  Bug fixes, testing for Diablo III MPQs               */</span>
<a name="l00067"></a>00067 <span class="comment">/* 26.04.12  8.10  Lad  Support for data map, added SFileGetArchiveBitmap    */</span>
<a name="l00068"></a>00068 <span class="comment">/* 29.05.12  8.20  Lad  C-only interface                                     */</span>
<a name="l00069"></a>00069 <span class="comment">/* 14.01.13  8.21  Lad  ADPCM and Huffmann (de)compression refactored        */</span>
<a name="l00070"></a>00070 <span class="comment">/* 04.12.13  9.00  Lad  Unit tests, bug fixes                                */</span>
<a name="l00071"></a>00071 <span class="comment">/*****************************************************************************/</span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="preprocessor">#ifndef __STORMLIB_H__</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span><span class="preprocessor">#define __STORMLIB_H__</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span>
<a name="l00076"></a>00076 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">#pragma warning(disable:4668)       // &#39;XXX&#39; is not defined as a preprocessor macro, replacing with &#39;0&#39; for &#39;#if/#elif&#39; </span>
<a name="l00078"></a>00078 <span class="preprocessor"></span><span class="preprocessor">#pragma warning(disable:4820)       // &#39;XXX&#39; : &#39;2&#39; bytes padding added after data member &#39;XXX::yyy&#39;</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor">#endif                                             </span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &quot;<a class="code" href="_storm_port_8h.html">StormPort.h</a>&quot;</span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00085"></a>00085 <span class="preprocessor">#endif</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span>
<a name="l00087"></a>00087 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00088"></a>00088 <span class="comment">// Use the apropriate library</span>
<a name="l00089"></a>00089 <span class="comment">//</span>
<a name="l00090"></a>00090 <span class="comment">// The library type is encoded in the library name as the following</span>
<a name="l00091"></a>00091 <span class="comment">// StormLibXYZ.lib</span>
<a name="l00092"></a>00092 <span class="comment">// </span>
<a name="l00093"></a>00093 <span class="comment">//  X - D for Debug version, R for Release version</span>
<a name="l00094"></a>00094 <span class="comment">//  Y - A for ANSI version, U for Unicode version</span>
<a name="l00095"></a>00095 <span class="comment">//  Z - S for static-linked CRT library, D for multithreaded DLL CRT library</span>
<a name="l00096"></a>00096 <span class="comment">//</span>
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">// We just want StormLib.lib</span>
<a name="l00099"></a>00099 <span class="comment">/*</span>
<a name="l00100"></a>00100 <span class="comment">#if defined(_MSC_VER) &amp;&amp; !defined(__STORMLIB_SELF__)</span>
<a name="l00101"></a>00101 <span class="comment">  </span>
<a name="l00102"></a>00102 <span class="comment">  #ifdef _DEBUG                                 // DEBUG VERSIONS</span>
<a name="l00103"></a>00103 <span class="comment">    #ifndef _UNICODE                            </span>
<a name="l00104"></a>00104 <span class="comment">      #ifdef _DLL                               </span>
<a name="l00105"></a>00105 <span class="comment">        #pragma comment(lib, &quot;StormLibDAD.lib&quot;) // Debug Ansi CRT-DLL version</span>
<a name="l00106"></a>00106 <span class="comment">      #else        </span>
<a name="l00107"></a>00107 <span class="comment">        #pragma comment(lib, &quot;StormLibDAS.lib&quot;) // Debug Ansi CRT-LIB version</span>
<a name="l00108"></a>00108 <span class="comment">      #endif</span>
<a name="l00109"></a>00109 <span class="comment">    #else</span>
<a name="l00110"></a>00110 <span class="comment">      #ifdef _DLL                               </span>
<a name="l00111"></a>00111 <span class="comment">        #pragma comment(lib, &quot;StormLibDUD.lib&quot;) // Debug Unicode CRT-DLL version</span>
<a name="l00112"></a>00112 <span class="comment">      #else        </span>
<a name="l00113"></a>00113 <span class="comment">        #pragma comment(lib, &quot;StormLibDUS.lib&quot;) // Debug Unicode CRT-LIB version</span>
<a name="l00114"></a>00114 <span class="comment">      #endif</span>
<a name="l00115"></a>00115 <span class="comment">    #endif</span>
<a name="l00116"></a>00116 <span class="comment">  #else                                         // RELEASE VERSIONS</span>
<a name="l00117"></a>00117 <span class="comment">    #ifndef _UNICODE                            </span>
<a name="l00118"></a>00118 <span class="comment">      #ifdef _DLL</span>
<a name="l00119"></a>00119 <span class="comment">        #pragma comment(lib, &quot;StormLibRAD.lib&quot;) // Release Ansi CRT-DLL version</span>
<a name="l00120"></a>00120 <span class="comment">      #else        </span>
<a name="l00121"></a>00121 <span class="comment">        #pragma comment(lib, &quot;StormLibRAS.lib&quot;) // Release Ansi CRT-LIB version</span>
<a name="l00122"></a>00122 <span class="comment">      #endif</span>
<a name="l00123"></a>00123 <span class="comment">    #else</span>
<a name="l00124"></a>00124 <span class="comment">      #ifdef _DLL</span>
<a name="l00125"></a>00125 <span class="comment">        #pragma comment(lib, &quot;StormLibRUD.lib&quot;) // Release Unicode CRT-DLL version</span>
<a name="l00126"></a>00126 <span class="comment">      #else        </span>
<a name="l00127"></a>00127 <span class="comment">        #pragma comment(lib, &quot;StormLibRUS.lib&quot;) // Release Unicode CRT-LIB version</span>
<a name="l00128"></a>00128 <span class="comment">      #endif</span>
<a name="l00129"></a>00129 <span class="comment">    #endif</span>
<a name="l00130"></a>00130 <span class="comment">  #endif</span>
<a name="l00131"></a>00131 <span class="comment"></span>
<a name="l00132"></a>00132 <span class="comment">#endif</span>
<a name="l00133"></a>00133 <span class="comment">*/</span>
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00136"></a>00136 <span class="comment">// Defines</span>
<a name="l00137"></a>00137 
<a name="l00138"></a><a class="code" href="_storm_lib_8h.html#a031908fc3b54d00500f8beb205e7b62b">00138</a> <span class="preprocessor">#define STORMLIB_VERSION                0x0900  // Current version of StormLib (9.0)</span>
<a name="l00139"></a><a class="code" href="_storm_lib_8h.html#a7de2eed879324d368864ee5c92724543">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define STORMLIB_VERSION_STRING         &quot;9.00&quot;  // String version of StormLib version</span>
<a name="l00140"></a>00140 <span class="preprocessor"></span>
<a name="l00141"></a><a class="code" href="_storm_lib_8h.html#afdeb8a7e9ccaca654f89d6ea624a296e">00141</a> <span class="preprocessor">#define ID_MPQ                      0x1A51504D  // MPQ archive header ID (&#39;MPQ\x1A&#39;)</span>
<a name="l00142"></a><a class="code" href="_storm_lib_8h.html#a4e2e3020558d60961dfcc8ef291b5a23">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define ID_MPQ_USERDATA             0x1B51504D  // MPQ userdata entry (&#39;MPQ\x1B&#39;)</span>
<a name="l00143"></a><a class="code" href="_storm_lib_8h.html#abe07659fac241778a323f2f9cfec7863">00143</a> <span class="preprocessor"></span><span class="preprocessor">#define ID_MPK                      0x1A4B504D  // MPK archive header ID (&#39;MPK\x1A&#39;)</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span>
<a name="l00145"></a><a class="code" href="_storm_lib_8h.html#a5a1367b6d80332535b570badd03ef220">00145</a> <span class="preprocessor">#define ERROR_AVI_FILE                   10000  // Not a MPQ file, but an AVI file.</span>
<a name="l00146"></a><a class="code" href="_storm_lib_8h.html#aa2030502390a47def8b04f44cb34d3f9">00146</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_UNKNOWN_FILE_KEY           10001  // Returned by SFileReadFile when can&#39;t find file key</span>
<a name="l00147"></a><a class="code" href="_storm_lib_8h.html#a9f18b946c99fbbd49141142a3dfa7a06">00147</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_CHECKSUM_ERROR             10002  // Returned by SFileReadFile when sector CRC doesn&#39;t match</span>
<a name="l00148"></a><a class="code" href="_storm_lib_8h.html#a7683ee00dc0a85461bd66b9b11d729cf">00148</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_INTERNAL_FILE              10003  // The given operation is not allowed on internal file</span>
<a name="l00149"></a><a class="code" href="_storm_lib_8h.html#a6546324d17254e46a57699f7850c033a">00149</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_BASE_FILE_MISSING          10004  // The file is present as incremental patch file, but base file is missing</span>
<a name="l00150"></a><a class="code" href="_storm_lib_8h.html#a45e7eb55f8eb0cc8a34abbe9af900f84">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_MARKED_FOR_DELETE          10005  // The file was marked as &quot;deleted&quot; in the MPQ</span>
<a name="l00151"></a><a class="code" href="_storm_lib_8h.html#a647cc9f030c44bd40c5d8222b784647b">00151</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_FILE_INCOMPLETE            10006  // The required file part is missing</span>
<a name="l00152"></a><a class="code" href="_storm_lib_8h.html#a57f7555a5180c325aff07e8ff0253ece">00152</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_UNKNOWN_FILE_NAMES         10007  // A name of at least one file is unknown</span>
<a name="l00153"></a>00153 <span class="preprocessor"></span>
<a name="l00154"></a>00154 <span class="comment">// Values for SFileCreateArchive</span>
<a name="l00155"></a><a class="code" href="_storm_lib_8h.html#a0f4d36e2ffb81279193121e9024feb43">00155</a> <span class="preprocessor">#define HASH_TABLE_SIZE_MIN         0x00000004  // Verified: If there is 1 file, hash table size is 4</span>
<a name="l00156"></a><a class="code" href="_storm_lib_8h.html#a8477ef59ba6aef774870885da4bc7c88">00156</a> <span class="preprocessor"></span><span class="preprocessor">#define HASH_TABLE_SIZE_DEFAULT     0x00001000  // Default hash table size for empty MPQs</span>
<a name="l00157"></a><a class="code" href="_storm_lib_8h.html#aedbee811ee259deb7cc5fff7cd360b46">00157</a> <span class="preprocessor"></span><span class="preprocessor">#define HASH_TABLE_SIZE_MAX         0x00080000  // Maximum acceptable hash table size</span>
<a name="l00158"></a>00158 <span class="preprocessor"></span>
<a name="l00159"></a><a class="code" href="_storm_lib_8h.html#ad10ece6325386b986d99623ab34c3b59">00159</a> <span class="preprocessor">#define HASH_ENTRY_DELETED          0xFFFFFFFE  // Block index for deleted entry in the hash table</span>
<a name="l00160"></a><a class="code" href="_storm_lib_8h.html#add57a74c393d7762e00da5327cff55b5">00160</a> <span class="preprocessor"></span><span class="preprocessor">#define HASH_ENTRY_FREE             0xFFFFFFFF  // Block index for free entry in the hash table</span>
<a name="l00161"></a>00161 <span class="preprocessor"></span>
<a name="l00162"></a><a class="code" href="_storm_lib_8h.html#a52ceafc669c872d0d062c04b7331a715">00162</a> <span class="preprocessor">#define HET_ENTRY_DELETED                 0x80  // NameHash1 value for a deleted entry</span>
<a name="l00163"></a><a class="code" href="_storm_lib_8h.html#a93f7b5a05f7a5af87e451d05194d530f">00163</a> <span class="preprocessor"></span><span class="preprocessor">#define HET_ENTRY_FREE                    0x00  // NameHash1 value for free entry</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>
<a name="l00165"></a><a class="code" href="_storm_lib_8h.html#ad3abe583066c89c98b265ed473d95538">00165</a> <span class="preprocessor">#define HASH_STATE_SIZE                   0x60  // Size of LibTomCrypt&#39;s hash_state structure</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00167"></a><a class="code" href="_storm_lib_8h.html#a177ebe55e6d0ad4775ab4b8c1cfdb95a">00167</a> <span class="preprocessor">#define MPQ_PATCH_PREFIX_LEN              0x20  // Maximum length of the patch prefix</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span>
<a name="l00169"></a>00169 <span class="comment">// Values for SFileOpenArchive</span>
<a name="l00170"></a><a class="code" href="_storm_lib_8h.html#aaf527ede972721c283bacf8297d08228">00170</a> <span class="preprocessor">#define SFILE_OPEN_HARD_DISK_FILE            2  // Open the archive on HDD</span>
<a name="l00171"></a><a class="code" href="_storm_lib_8h.html#a5cb10f9714084ef0ac3eec153617138c">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_OPEN_CDROM_FILE                3  // Open the archive only if it is on CDROM</span>
<a name="l00172"></a>00172 <span class="preprocessor"></span>
<a name="l00173"></a>00173 <span class="comment">// Values for SFileOpenFile</span>
<a name="l00174"></a><a class="code" href="_storm_lib_8h.html#aa0487a431f6f1a0104457adccdff675f">00174</a> <span class="preprocessor">#define SFILE_OPEN_FROM_MPQ         0x00000000  // Open the file from the MPQ archive</span>
<a name="l00175"></a><a class="code" href="_storm_lib_8h.html#a1624257a38d19c0d19bb4af7edbec9c7">00175</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_OPEN_BASE_FILE        0xFFFFFFFD  // Reserved for StormLib internal use</span>
<a name="l00176"></a><a class="code" href="_storm_lib_8h.html#ac2bfdfbe63dbc19f7c508d3eaebef8aa">00176</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_OPEN_ANY_LOCALE       0xFFFFFFFE  // Reserved for StormLib internal use</span>
<a name="l00177"></a><a class="code" href="_storm_lib_8h.html#a52c689d0a82d6fd9b5c71519d1ef95ea">00177</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_OPEN_LOCAL_FILE       0xFFFFFFFF  // Open a local file</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span>
<a name="l00179"></a>00179 <span class="comment">// Flags for TMPQArchive::dwFlags</span>
<a name="l00180"></a><a class="code" href="_storm_lib_8h.html#ac79954b2e62ac6c6da211fc5c75973e4">00180</a> <span class="preprocessor">#define MPQ_FLAG_READ_ONLY          0x00000001  // If set, the MPQ has been open for read-only access</span>
<a name="l00181"></a><a class="code" href="_storm_lib_8h.html#a3c8ed28738e3f0f8fb54fbc395704613">00181</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FLAG_CHANGED            0x00000002  // If set, the MPQ tables have been changed</span>
<a name="l00182"></a><a class="code" href="_storm_lib_8h.html#a4e78695275e602042f25c946a7a8fdb5">00182</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FLAG_MALFORMED          0x00000004  // Malformed data structure detected (W3M map protectors)</span>
<a name="l00183"></a><a class="code" href="_storm_lib_8h.html#aa95c447187bfeb909739ad2c64158d2e">00183</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FLAG_CHECK_SECTOR_CRC   0x00000008  // Checking sector CRC when reading files</span>
<a name="l00184"></a><a class="code" href="_storm_lib_8h.html#af1fc2d76e84cfc11bd79bfe26436de65">00184</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FLAG_LISTFILE_INVALID   0x00000020  // If set, it means that the (listfile) has been invalidated</span>
<a name="l00185"></a><a class="code" href="_storm_lib_8h.html#a154cc55e59ccb4e21d8f46e09918cbeb">00185</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FLAG_ATTRIBUTES_INVALID 0x00000040  // If set, it means that the (attributes) has been invalidated</span>
<a name="l00186"></a><a class="code" href="_storm_lib_8h.html#a4acb2f84a836d801e0b5b663f8075d56">00186</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FLAG_SAVING_TABLES      0x00000080  // If set, we are saving MPQ internal files and MPQ tables</span>
<a name="l00187"></a>00187 <span class="preprocessor"></span>
<a name="l00188"></a>00188 <span class="comment">// Values for TMPQArchive::dwSubType</span>
<a name="l00189"></a><a class="code" href="_storm_lib_8h.html#a6e64f04d2a32d5aa33bcd8dba9b4826a">00189</a> <span class="preprocessor">#define MPQ_SUBTYPE_MPQ             0x00000000  // The file is a MPQ file (Blizzard games)</span>
<a name="l00190"></a><a class="code" href="_storm_lib_8h.html#ad59731efb4497a04a008785e138dcb5f">00190</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_SUBTYPE_SQP             0x00000001  // The file is a SQP file (War of the Immortals)</span>
<a name="l00191"></a><a class="code" href="_storm_lib_8h.html#a651b9c2037d450d51b1a6926a074c216">00191</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_SUBTYPE_MPK             0x00000002  // The file is a MPK file (Longwu Online)</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>
<a name="l00193"></a>00193 <span class="comment">// Return value for SFileGetFileSize and SFileSetFilePointer</span>
<a name="l00194"></a><a class="code" href="_storm_lib_8h.html#a022049f94d664793d5bdf9825b5dc368">00194</a> <span class="preprocessor">#define SFILE_INVALID_SIZE          0xFFFFFFFF</span>
<a name="l00195"></a><a class="code" href="_storm_lib_8h.html#a4b28e2af68b69ed953f40f888d3756d5">00195</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_INVALID_POS           0xFFFFFFFF</span>
<a name="l00196"></a><a class="code" href="_storm_lib_8h.html#aa4e1878a70e0134ae5b02fcd4b31d317">00196</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_INVALID_ATTRIBUTES    0xFFFFFFFF</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>
<a name="l00198"></a>00198 <span class="comment">// Flags for SFileAddFile</span>
<a name="l00199"></a><a class="code" href="_storm_lib_8h.html#adcf67b78a67069b1d79d2bb10247d985">00199</a> <span class="preprocessor">#define MPQ_FILE_IMPLODE            0x00000100  // Implode method (By PKWARE Data Compression Library)</span>
<a name="l00200"></a><a class="code" href="_storm_lib_8h.html#a05c0e6be65657562b772b5ca9b667f0b">00200</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_COMPRESS           0x00000200  // Compress methods (By multiple methods)</span>
<a name="l00201"></a><a class="code" href="_storm_lib_8h.html#a08fa41196410aea4c03e8e9210cc6606">00201</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_ENCRYPTED          0x00010000  // Indicates whether file is encrypted </span>
<a name="l00202"></a><a class="code" href="_storm_lib_8h.html#a0e7165d33cb4239684eb19fe59f8a8d7">00202</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_FIX_KEY            0x00020000  // File decryption key has to be fixed</span>
<a name="l00203"></a><a class="code" href="_storm_lib_8h.html#a437c4920546d0e3e3a7a4e040e9aef20">00203</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_PATCH_FILE         0x00100000  // The file is a patch file. Raw file data begin with TPatchInfo structure</span>
<a name="l00204"></a><a class="code" href="_storm_lib_8h.html#ad8b6a5c0f3a3c71f60202ba17b5210df">00204</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_SINGLE_UNIT        0x01000000  // File is stored as a single unit, rather than split into sectors (Thx, Quantam)</span>
<a name="l00205"></a><a class="code" href="_storm_lib_8h.html#a3d72c520a6b4b501cb6459b9f5c88e6d">00205</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_DELETE_MARKER      0x02000000  // File is a deletion marker. Used in MPQ patches, indicating that the file no longer exists.</span>
<a name="l00206"></a><a class="code" href="_storm_lib_8h.html#a636264ae6b8299c2ad8bfcbf3d1c2e5f">00206</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_SECTOR_CRC         0x04000000  // File has checksums for each sector.</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span>                                                <span class="comment">// Ignored if file is not compressed or imploded.</span>
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="_storm_lib_8h.html#a16951666146d61c988c6d7155493be82">00209</a> <span class="preprocessor">#define MPQ_FILE_COMPRESS_MASK      0x0000FF00  // Mask for a file being compressed</span>
<a name="l00210"></a><a class="code" href="_storm_lib_8h.html#af6f21d7e58bf7855583c8f9667467432">00210</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_EXISTS             0x80000000  // Set if file exists, reset when the file was deleted</span>
<a name="l00211"></a><a class="code" href="_storm_lib_8h.html#aa273ca9983adfbfa82fe442303f27f32">00211</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FILE_REPLACEEXISTING    0x80000000  // Replace when the file exist (SFileAddFile)</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>
<a name="l00213"></a><a class="code" href="_storm_lib_8h.html#a30e8562440ee665b1e68625ce7bfc832">00213</a> <span class="preprocessor">#define MPQ_FILE_VALID_FLAGS     (MPQ_FILE_IMPLODE       |  \</span>
<a name="l00214"></a>00214 <span class="preprocessor">                                  MPQ_FILE_COMPRESS      |  \</span>
<a name="l00215"></a>00215 <span class="preprocessor">                                  MPQ_FILE_ENCRYPTED     |  \</span>
<a name="l00216"></a>00216 <span class="preprocessor">                                  MPQ_FILE_FIX_KEY       |  \</span>
<a name="l00217"></a>00217 <span class="preprocessor">                                  MPQ_FILE_PATCH_FILE    |  \</span>
<a name="l00218"></a>00218 <span class="preprocessor">                                  MPQ_FILE_SINGLE_UNIT   |  \</span>
<a name="l00219"></a>00219 <span class="preprocessor">                                  MPQ_FILE_DELETE_MARKER |  \</span>
<a name="l00220"></a>00220 <span class="preprocessor">                                  MPQ_FILE_SECTOR_CRC    |  \</span>
<a name="l00221"></a>00221 <span class="preprocessor">                                  MPQ_FILE_EXISTS)</span>
<a name="l00222"></a>00222 <span class="preprocessor"></span>
<a name="l00223"></a>00223 <span class="comment">// Compression types for multiple compressions</span>
<a name="l00224"></a><a class="code" href="_storm_lib_8h.html#a505a02c8e15a72cf17ec5b1e3642ba7c">00224</a> <span class="preprocessor">#define MPQ_COMPRESSION_HUFFMANN          0x01  // Huffmann compression (used on WAVE files only)</span>
<a name="l00225"></a><a class="code" href="_storm_lib_8h.html#ac70d5d9d0a9f5d020ba7c84b6d441edb">00225</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_ZLIB              0x02  // ZLIB compression</span>
<a name="l00226"></a><a class="code" href="_storm_lib_8h.html#affcc96014fb0d52f7d555ea5729e526b">00226</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_PKWARE            0x08  // PKWARE DCL compression</span>
<a name="l00227"></a><a class="code" href="_storm_lib_8h.html#ac44b18d438b10b9dab3e0097423248ad">00227</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_BZIP2             0x10  // BZIP2 compression (added in Warcraft III)</span>
<a name="l00228"></a><a class="code" href="_storm_lib_8h.html#ac85b92394ff58491ebaee0aff8e50169">00228</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_SPARSE            0x20  // Sparse compression (added in Starcraft 2)</span>
<a name="l00229"></a><a class="code" href="_storm_lib_8h.html#a1c53d9ecdba00873daf8b8396ecf3d75">00229</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_ADPCM_MONO        0x40  // IMA ADPCM compression (mono)</span>
<a name="l00230"></a><a class="code" href="_storm_lib_8h.html#a3b1d4a7c8d9ccbdc02b748ab2fd4f882">00230</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_ADPCM_STEREO      0x80  // IMA ADPCM compression (stereo)</span>
<a name="l00231"></a><a class="code" href="_storm_lib_8h.html#a8e5be3b3c8663e78a6acdaa131c6e013">00231</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_LZMA              0x12  // LZMA compression. Added in Starcraft 2. This value is NOT a combination of flags.</span>
<a name="l00232"></a><a class="code" href="_storm_lib_8h.html#a7e8cd5068f8ae19c7af3b48bc505a25d">00232</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_COMPRESSION_NEXT_SAME   0xFFFFFFFF  // Same compression</span>
<a name="l00233"></a>00233 <span class="preprocessor"></span>
<a name="l00234"></a>00234 <span class="comment">// Constants for SFileAddWave</span>
<a name="l00235"></a><a class="code" href="_storm_lib_8h.html#aed030ca83ebe6815790b05ae4b459cdc">00235</a> <span class="preprocessor">#define MPQ_WAVE_QUALITY_HIGH                0  // Best quality, the worst compression</span>
<a name="l00236"></a><a class="code" href="_storm_lib_8h.html#aec7980211792c800ab5d63ad1d9c9529">00236</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_WAVE_QUALITY_MEDIUM              1  // Medium quality, medium compression</span>
<a name="l00237"></a><a class="code" href="_storm_lib_8h.html#a909bfc1dc91e7447f063552867ca64f7">00237</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_WAVE_QUALITY_LOW                 2  // Low quality, the best compression</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>
<a name="l00239"></a>00239 <span class="comment">// Signatures for HET and BET table</span>
<a name="l00240"></a><a class="code" href="_storm_lib_8h.html#a2ca11d3a6a1b2a0c7e18961e6881af5a">00240</a> <span class="preprocessor">#define HET_TABLE_SIGNATURE         0x1A544548  // &#39;HET\x1a&#39;</span>
<a name="l00241"></a><a class="code" href="_storm_lib_8h.html#aed26bd0c6cd280f2dffb483779b448f3">00241</a> <span class="preprocessor"></span><span class="preprocessor">#define BET_TABLE_SIGNATURE         0x1A544542  // &#39;BET\x1a&#39;</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span>
<a name="l00243"></a>00243 <span class="comment">// Decryption keys for MPQ tables</span>
<a name="l00244"></a><a class="code" href="_storm_lib_8h.html#a1a49495e73433f2ed5692e36d5231337">00244</a> <span class="preprocessor">#define MPQ_KEY_HASH_TABLE          0xC3AF3770  // Obtained by HashString(&quot;(hash table)&quot;, MPQ_HASH_FILE_KEY)</span>
<a name="l00245"></a><a class="code" href="_storm_lib_8h.html#a2ba8acbca4e801d8cd224cac146d1a78">00245</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_KEY_BLOCK_TABLE         0xEC83B3A3  // Obtained by HashString(&quot;(block table)&quot;, MPQ_HASH_FILE_KEY)</span>
<a name="l00246"></a>00246 <span class="preprocessor"></span>
<a name="l00247"></a><a class="code" href="_storm_lib_8h.html#ac797c1c425d999b5bc992e2e39b4169e">00247</a> <span class="preprocessor">#define LISTFILE_NAME             &quot;(listfile)&quot;  // Name of internal listfile</span>
<a name="l00248"></a><a class="code" href="_storm_lib_8h.html#ab9ccdfbc136fcd937541b27333e03159">00248</a> <span class="preprocessor"></span><span class="preprocessor">#define SIGNATURE_NAME           &quot;(signature)&quot;  // Name of internal signature</span>
<a name="l00249"></a><a class="code" href="_storm_lib_8h.html#a5a4e12f2d4a5ad2426f3eb302db71feb">00249</a> <span class="preprocessor"></span><span class="preprocessor">#define ATTRIBUTES_NAME         &quot;(attributes)&quot;  // Name of internal attributes file</span>
<a name="l00250"></a><a class="code" href="_storm_lib_8h.html#a72cafe8df240132c2f36cacb5952552c">00250</a> <span class="preprocessor"></span><span class="preprocessor">#define PATCH_METADATA_NAME &quot;(patch_metadata)&quot;</span>
<a name="l00251"></a>00251 <span class="preprocessor"></span>
<a name="l00252"></a><a class="code" href="_storm_lib_8h.html#aa45e1b9993a87e5d6cb2adf3abb6e0c3">00252</a> <span class="preprocessor">#define MPQ_FORMAT_VERSION_1                 0  // Up to The Burning Crusade</span>
<a name="l00253"></a><a class="code" href="_storm_lib_8h.html#a9b68734ff3ecc5d8ca7d4633f42cda4d">00253</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FORMAT_VERSION_2                 1  // The Burning Crusade and newer </span>
<a name="l00254"></a><a class="code" href="_storm_lib_8h.html#af9d56babfd44b33bc4b352006fa9c761">00254</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FORMAT_VERSION_3                 2  // WoW Cataclysm Beta</span>
<a name="l00255"></a><a class="code" href="_storm_lib_8h.html#a6a35c4ad2d3b9ee964c96f325cf25c8f">00255</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_FORMAT_VERSION_4                 3  // WoW Cataclysm and newer</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span>
<a name="l00257"></a>00257 <span class="comment">// Flags for MPQ attributes</span>
<a name="l00258"></a><a class="code" href="_storm_lib_8h.html#ac644a10d909d5d8dde26be2b4f4236e6">00258</a> <span class="preprocessor">#define MPQ_ATTRIBUTE_CRC32         0x00000001  // The &quot;(attributes)&quot; contains CRC32 for each file</span>
<a name="l00259"></a><a class="code" href="_storm_lib_8h.html#ad21c3706c1eaf54c3a548f3700fcfb99">00259</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_ATTRIBUTE_FILETIME      0x00000002  // The &quot;(attributes)&quot; contains file time for each file</span>
<a name="l00260"></a><a class="code" href="_storm_lib_8h.html#a70410c678aa8ca095cf2c1291865165b">00260</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_ATTRIBUTE_MD5           0x00000004  // The &quot;(attributes)&quot; contains MD5 for each file</span>
<a name="l00261"></a><a class="code" href="_storm_lib_8h.html#a2ba5b235fec95d21fa0e31d3a177c532">00261</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_ATTRIBUTE_PATCH_BIT     0x00000008  // The &quot;(attributes)&quot; contains a patch bit for each file</span>
<a name="l00262"></a><a class="code" href="_storm_lib_8h.html#a0c71a04690bd449dc900b58111364c54">00262</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_ATTRIBUTE_ALL           0x0000000F  // Summary mask</span>
<a name="l00263"></a>00263 <span class="preprocessor"></span>
<a name="l00264"></a><a class="code" href="_storm_lib_8h.html#a9600f76391ab7f6c162e5d634af73e7d">00264</a> <span class="preprocessor">#define MPQ_ATTRIBUTES_V1                  100  // (attributes) format version 1.00</span>
<a name="l00265"></a>00265 <span class="preprocessor"></span>
<a name="l00266"></a>00266 <span class="comment">// Flags for SFileOpenArchive</span>
<a name="l00267"></a><a class="code" href="_storm_lib_8h.html#a3773c068cc9e5acf2ef6a0fd9b4a534e">00267</a> <span class="preprocessor">#define BASE_PROVIDER_FILE          0x00000000  // Base data source is a file</span>
<a name="l00268"></a><a class="code" href="_storm_lib_8h.html#a232c23ccf69f395a9edb5e6280b26513">00268</a> <span class="preprocessor"></span><span class="preprocessor">#define BASE_PROVIDER_MAP           0x00000001  // Base data source is memory-mapped file</span>
<a name="l00269"></a><a class="code" href="_storm_lib_8h.html#a120d1199a5c9b89d84bd7d3cdacd6b68">00269</a> <span class="preprocessor"></span><span class="preprocessor">#define BASE_PROVIDER_HTTP          0x00000002  // Base data source is a file on web server</span>
<a name="l00270"></a><a class="code" href="_storm_lib_8h.html#aa1838acaf14cde2205ad15734d17c6bd">00270</a> <span class="preprocessor"></span><span class="preprocessor">#define BASE_PROVIDER_MASK          0x0000000F  // Mask for base provider value</span>
<a name="l00271"></a>00271 <span class="preprocessor"></span>
<a name="l00272"></a><a class="code" href="_storm_lib_8h.html#a45b6170ca9e7880848cdca068234d28c">00272</a> <span class="preprocessor">#define STREAM_PROVIDER_FLAT        0x00000000  // Stream is linear with no offset mapping</span>
<a name="l00273"></a><a class="code" href="_storm_lib_8h.html#a4b2a4fcc373340f8488b54729205c0df">00273</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_PROVIDER_PARTIAL     0x00000010  // Stream is partial file (.part)</span>
<a name="l00274"></a><a class="code" href="_storm_lib_8h.html#aebd4c9ef6f6e60b283469eb9aeebcd8e">00274</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_PROVIDER_MPQE        0x00000020  // Stream is an encrypted MPQ</span>
<a name="l00275"></a><a class="code" href="_storm_lib_8h.html#a5bbce6c9768ac7cbc1fb4541a2153758">00275</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_PROVIDER_BLOCK4      0x00000030  // 0x4000 per block, text MD5 after each block, max 0x2000 blocks per file</span>
<a name="l00276"></a><a class="code" href="_storm_lib_8h.html#a85f30debca5af9c69185146dda3eba18">00276</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_PROVIDER_MASK        0x000000F0  // Mask for stream provider value</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>
<a name="l00278"></a><a class="code" href="_storm_lib_8h.html#abdbbf06488f24699775afe6aadaeafc3">00278</a> <span class="preprocessor">#define STREAM_FLAG_READ_ONLY       0x00000100  // Stream is read only</span>
<a name="l00279"></a><a class="code" href="_storm_lib_8h.html#a70f64cc8946e34d88ab1c2de9d76ba4c">00279</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_FLAG_WRITE_SHARE     0x00000200  // Allow write sharing when open for write</span>
<a name="l00280"></a><a class="code" href="_storm_lib_8h.html#a77521bc89504101b3294646ad1b462c0">00280</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_FLAG_USE_BITMAP      0x00000400  // If the file has a file bitmap, load it and use it</span>
<a name="l00281"></a><a class="code" href="_storm_lib_8h.html#a13ca5b98664197b09f6161b08bf02db3">00281</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_OPTIONS_MASK         0x0000FF00  // Mask for stream options</span>
<a name="l00282"></a>00282 <span class="preprocessor"></span>
<a name="l00283"></a><a class="code" href="_storm_lib_8h.html#a07a964e92d9c6a64250c80b56e75c520">00283</a> <span class="preprocessor">#define STREAM_PROVIDERS_MASK       0x000000FF  // Mask to get stream providers</span>
<a name="l00284"></a><a class="code" href="_storm_lib_8h.html#a9f173a8fcf0edc58cb2f8a6d41739e86">00284</a> <span class="preprocessor"></span><span class="preprocessor">#define STREAM_FLAGS_MASK           0x0000FFFF  // Mask for all stream flags (providers+options)</span>
<a name="l00285"></a>00285 <span class="preprocessor"></span>
<a name="l00286"></a><a class="code" href="_storm_lib_8h.html#ab0c2a5d3970ee9739abd4ff3e2a737f5">00286</a> <span class="preprocessor">#define MPQ_OPEN_NO_LISTFILE        0x00010000  // Don&#39;t load the internal listfile</span>
<a name="l00287"></a><a class="code" href="_storm_lib_8h.html#a018cad433037d094e4b7284bcb5b3592">00287</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_OPEN_NO_ATTRIBUTES      0x00020000  // Don&#39;t open the attributes</span>
<a name="l00288"></a><a class="code" href="_storm_lib_8h.html#a09a1921f8ee78b95d6c06042f1f8b6e9">00288</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_OPEN_NO_HEADER_SEARCH   0x00040000  // Don&#39;t search for the MPQ header past the begin of the file</span>
<a name="l00289"></a><a class="code" href="_storm_lib_8h.html#abc1fb88a688d62bd6c515533a783f484">00289</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_OPEN_FORCE_MPQ_V1       0x00080000  // Always open the archive as MPQ v 1.00, ignore the &quot;wFormatVersion&quot; variable in the header</span>
<a name="l00290"></a><a class="code" href="_storm_lib_8h.html#a67a24865bfa8b31f56ed8ebc558f2677">00290</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_OPEN_CHECK_SECTOR_CRC   0x00100000  // On files with MPQ_FILE_SECTOR_CRC, the CRC will be checked when reading file</span>
<a name="l00291"></a><a class="code" href="_storm_lib_8h.html#adf19ed8ad3e0e1c2c57c5b614e73323f">00291</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_OPEN_READ_ONLY          STREAM_FLAG_READ_ONLY</span>
<a name="l00292"></a>00292 <span class="preprocessor"></span>
<a name="l00293"></a>00293 <span class="comment">// Flags for SFileCreateArchive</span>
<a name="l00294"></a><a class="code" href="_storm_lib_8h.html#a720c79849591bfbef1d676d52da477ab">00294</a> <span class="preprocessor">#define MPQ_CREATE_LISTFILE         0x00100000  // Also add the (listfile) file</span>
<a name="l00295"></a><a class="code" href="_storm_lib_8h.html#a604f97b6d0427af5441baa5b91fc86ad">00295</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_CREATE_ATTRIBUTES       0x00200000  // Also add the (attributes) file</span>
<a name="l00296"></a><a class="code" href="_storm_lib_8h.html#a2af5ec64d857d1f53d34f23bc0aacfde">00296</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_CREATE_ARCHIVE_V1       0x00000000  // Creates archive of version 1 (size up to 4GB)</span>
<a name="l00297"></a><a class="code" href="_storm_lib_8h.html#ae7ab2d885ce56ca4269b6c1500f1e3c2">00297</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_CREATE_ARCHIVE_V2       0x01000000  // Creates archive of version 2 (larger than 4 GB)</span>
<a name="l00298"></a><a class="code" href="_storm_lib_8h.html#a62d64df7b96b62259f995a1553953ee4">00298</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_CREATE_ARCHIVE_V3       0x02000000  // Creates archive of version 3</span>
<a name="l00299"></a><a class="code" href="_storm_lib_8h.html#a5bf1cc015cc917d3d72751933a3c3cd1">00299</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_CREATE_ARCHIVE_V4       0x03000000  // Creates archive of version 4</span>
<a name="l00300"></a><a class="code" href="_storm_lib_8h.html#ab0397d4d1250c2fb4bb49e456e14c5ec">00300</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_CREATE_ARCHIVE_VMASK    0x0F000000  // Mask for archive version</span>
<a name="l00301"></a>00301 <span class="preprocessor"></span>
<a name="l00302"></a><a class="code" href="_storm_lib_8h.html#ad47fff8ab312819b1ea232ef14539bc5">00302</a> <span class="preprocessor">#define FLAGS_TO_FORMAT_SHIFT               24  // (MPQ_CREATE_ARCHIVE_V4 &gt;&gt; FLAGS_TO_FORMAT_SHIFT) =&gt; MPQ_FORMAT_VERSION_4</span>
<a name="l00303"></a>00303 <span class="preprocessor"></span>
<a name="l00304"></a>00304 <span class="comment">// Flags for SFileVerifyFile</span>
<a name="l00305"></a><a class="code" href="_storm_lib_8h.html#ae3c4cf9a4e9de88c777c100090b2e5e4">00305</a> <span class="preprocessor">#define SFILE_VERIFY_SECTOR_CRC     0x00000001  // Verify sector checksum for the file, if available</span>
<a name="l00306"></a><a class="code" href="_storm_lib_8h.html#aecbacf5da4f209745e3e4a29b6acbcb1">00306</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_FILE_CRC       0x00000002  // Verify file CRC, if available</span>
<a name="l00307"></a><a class="code" href="_storm_lib_8h.html#a3aad6c57f5c8791e70fd964a4856308d">00307</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_FILE_MD5       0x00000004  // Verify file MD5, if available</span>
<a name="l00308"></a><a class="code" href="_storm_lib_8h.html#aa1102b943ca7cca8f441becd2e62ab74">00308</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_RAW_MD5        0x00000008  // Verify raw file MD5, if available</span>
<a name="l00309"></a><a class="code" href="_storm_lib_8h.html#aa59d60c28005937abdd26374e5413ab9">00309</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_ALL            0x0000000F  // Verify every checksum possible</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span>
<a name="l00311"></a>00311 <span class="comment">// Return values for SFileVerifyFile</span>
<a name="l00312"></a><a class="code" href="_storm_lib_8h.html#a60289c353e19b4b9f094c08c16c203a1">00312</a> <span class="preprocessor">#define VERIFY_OPEN_ERROR               0x0001  // Failed to open the file</span>
<a name="l00313"></a><a class="code" href="_storm_lib_8h.html#a09dc4931e2293affb99c2b608f7ac5c6">00313</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_READ_ERROR               0x0002  // Failed to read all data from the file</span>
<a name="l00314"></a><a class="code" href="_storm_lib_8h.html#af0452ff667b8f6c27f6836b3d3e078f7">00314</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_HAS_SECTOR_CRC      0x0004  // File has sector CRC</span>
<a name="l00315"></a><a class="code" href="_storm_lib_8h.html#a934b5a56633ef30f63cd3731767d7e69">00315</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_SECTOR_CRC_ERROR    0x0008  // Sector CRC check failed</span>
<a name="l00316"></a><a class="code" href="_storm_lib_8h.html#a650e382f930af554af46e681bc2a3f07">00316</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_HAS_CHECKSUM        0x0010  // File has CRC32</span>
<a name="l00317"></a><a class="code" href="_storm_lib_8h.html#a230cb606fc96bdc818bcfbab5048b77e">00317</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_CHECKSUM_ERROR      0x0020  // CRC32 check failed</span>
<a name="l00318"></a><a class="code" href="_storm_lib_8h.html#adb51ab95f1d38e53b7bdc018f85bcc0c">00318</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_HAS_MD5             0x0040  // File has data MD5</span>
<a name="l00319"></a><a class="code" href="_storm_lib_8h.html#a94636e6914fe491c599855f865a17de1">00319</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_MD5_ERROR           0x0080  // MD5 check failed</span>
<a name="l00320"></a><a class="code" href="_storm_lib_8h.html#af9c32306540a4843c10d65c13d0ed0ba">00320</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_HAS_RAW_MD5         0x0100  // File has raw data MD5</span>
<a name="l00321"></a><a class="code" href="_storm_lib_8h.html#a29975425d21cdc11f9559439b08e20b9">00321</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_RAW_MD5_ERROR       0x0200  // Raw MD5 check failed</span>
<a name="l00322"></a><a class="code" href="_storm_lib_8h.html#a8206034be7a98f99549fab9ce2e2aef8">00322</a> <span class="preprocessor"></span><span class="preprocessor">#define VERIFY_FILE_ERROR_MASK      (VERIFY_OPEN_ERROR | VERIFY_READ_ERROR | VERIFY_FILE_SECTOR_CRC_ERROR | VERIFY_FILE_CHECKSUM_ERROR | VERIFY_FILE_MD5_ERROR | VERIFY_FILE_RAW_MD5_ERROR)</span>
<a name="l00323"></a>00323 <span class="preprocessor"></span>
<a name="l00324"></a>00324 <span class="comment">// Flags for SFileVerifyRawData (for MPQs version 4.0 or higher)</span>
<a name="l00325"></a><a class="code" href="_storm_lib_8h.html#adadd6810c67c668a700defc285863d61">00325</a> <span class="preprocessor">#define SFILE_VERIFY_MPQ_HEADER         0x0001  // Verify raw MPQ header</span>
<a name="l00326"></a><a class="code" href="_storm_lib_8h.html#a3917b61fcb966ea779d4eb7e78f6f615">00326</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_HET_TABLE          0x0002  // Verify raw data of the HET table</span>
<a name="l00327"></a><a class="code" href="_storm_lib_8h.html#afb5281c0e786bb605747f2fb4e2d9ca5">00327</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_BET_TABLE          0x0003  // Verify raw data of the BET table</span>
<a name="l00328"></a><a class="code" href="_storm_lib_8h.html#a000fbd39696b31da38961ae3cf41091a">00328</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_HASH_TABLE         0x0004  // Verify raw data of the hash table</span>
<a name="l00329"></a><a class="code" href="_storm_lib_8h.html#a5cd4ed2f493ee43df89028627339d7dc">00329</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_BLOCK_TABLE        0x0005  // Verify raw data of the block table</span>
<a name="l00330"></a><a class="code" href="_storm_lib_8h.html#abc1a3a6643170e969d6ddaf049fdc8c7">00330</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_HIBLOCK_TABLE      0x0006  // Verify raw data of the hi-block table</span>
<a name="l00331"></a><a class="code" href="_storm_lib_8h.html#aecf09fd72b7b52b78debe67c4553f955">00331</a> <span class="preprocessor"></span><span class="preprocessor">#define SFILE_VERIFY_FILE               0x0007  // Verify raw data of a file</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span>
<a name="l00333"></a>00333 <span class="comment">// Signature types</span>
<a name="l00334"></a><a class="code" href="_storm_lib_8h.html#a963e3c2877d3c9d08737ce2e901cb17f">00334</a> <span class="preprocessor">#define SIGNATURE_TYPE_NONE             0x0000  // The archive has no signature in it</span>
<a name="l00335"></a><a class="code" href="_storm_lib_8h.html#a4cac1edf4a3101da9c369e81fd7c0908">00335</a> <span class="preprocessor"></span><span class="preprocessor">#define SIGNATURE_TYPE_WEAK             0x0001  // The archive has weak signature</span>
<a name="l00336"></a><a class="code" href="_storm_lib_8h.html#ab77da79e415e52afa44cb2a346bc55c7">00336</a> <span class="preprocessor"></span><span class="preprocessor">#define SIGNATURE_TYPE_STRONG           0x0002  // The archive has strong signature</span>
<a name="l00337"></a>00337 <span class="preprocessor"></span>
<a name="l00338"></a>00338 <span class="comment">// Return values for SFileVerifyArchive</span>
<a name="l00339"></a><a class="code" href="_storm_lib_8h.html#a4cfaf1c7907e9a9602946ef99b826bba">00339</a> <span class="preprocessor">#define ERROR_NO_SIGNATURE                   0  // There is no signature in the MPQ</span>
<a name="l00340"></a><a class="code" href="_storm_lib_8h.html#a80c17a568554b991f15c75f4ad29c3c1">00340</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_VERIFY_FAILED                  1  // There was an error during verifying signature (like no memory)</span>
<a name="l00341"></a><a class="code" href="_storm_lib_8h.html#a10a8149306a6a8e578dc12543410c379">00341</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_WEAK_SIGNATURE_OK              2  // There is a weak signature and sign check passed</span>
<a name="l00342"></a><a class="code" href="_storm_lib_8h.html#a65e69300ff2f38e008b5777aff4ddbaf">00342</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_WEAK_SIGNATURE_ERROR           3  // There is a weak signature but sign check failed</span>
<a name="l00343"></a><a class="code" href="_storm_lib_8h.html#ab10c6f68d647bc434f3b6064f52e7482">00343</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_STRONG_SIGNATURE_OK            4  // There is a strong signature and sign check passed</span>
<a name="l00344"></a><a class="code" href="_storm_lib_8h.html#ad3188fa17a746b41f2e88467d795611b">00344</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_STRONG_SIGNATURE_ERROR         5  // There is a strong signature but sign check failed</span>
<a name="l00345"></a>00345 <span class="preprocessor"></span>                                           
<a name="l00346"></a>00346 <span class="preprocessor">#ifndef MD5_DIGEST_SIZE</span>
<a name="l00347"></a>00347 <span class="preprocessor"></span><span class="preprocessor">#define MD5_DIGEST_SIZE                   0x10</span>
<a name="l00348"></a>00348 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00349"></a>00349 <span class="preprocessor"></span>
<a name="l00350"></a>00350 <span class="preprocessor">#ifndef SHA1_DIGEST_SIZE</span>
<a name="l00351"></a>00351 <span class="preprocessor"></span><span class="preprocessor">#define SHA1_DIGEST_SIZE                  0x14  // 160 bits</span>
<a name="l00352"></a>00352 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00353"></a>00353 <span class="preprocessor"></span>
<a name="l00354"></a>00354 <span class="preprocessor">#ifndef LANG_NEUTRAL</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span><span class="preprocessor">#define LANG_NEUTRAL                      0x00  // Neutral locale</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00357"></a>00357 <span class="preprocessor"></span>
<a name="l00358"></a>00358 <span class="comment">// Pointer to hashing function</span>
<a name="l00359"></a><a class="code" href="_storm_lib_8h.html#a144bc2a1bbec5b42be403e3bdb16d013">00359</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> (*<a class="code" href="_storm_lib_8h.html#a144bc2a1bbec5b42be403e3bdb16d013">HASH_STRING</a>)(<span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwHashType);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00362"></a>00362 <span class="comment">// File information classes for SFileGetFileInfo and SFileFreeFileInfo</span>
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3">00364</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3">_SFileInfoClass</a>
<a name="l00365"></a>00365 {
<a name="l00366"></a>00366     <span class="comment">// Info classes for archives</span>
<a name="l00367"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a6f586faa00c75a8cdad953e5efde6286">00367</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a6f586faa00c75a8cdad953e5efde6286">SFileMpqFileName</a>,                       <span class="comment">// Name of the archive file (TCHAR [])</span>
<a name="l00368"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a16b9fe55c427a5197e7a74440c639f6d">00368</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a16b9fe55c427a5197e7a74440c639f6d">SFileMpqStreamBitmap</a>,                   <span class="comment">// Array of bits, each bit means availability of one block (BYTE [])</span>
<a name="l00369"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ab6ac50d041070ae4b65f53681f0854e9">00369</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ab6ac50d041070ae4b65f53681f0854e9">SFileMpqUserDataOffset</a>,                 <span class="comment">// Offset of the user data header (ULONGLONG)</span>
<a name="l00370"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a13361d2361f48e8b52f78f132027f4ae">00370</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a13361d2361f48e8b52f78f132027f4ae">SFileMpqUserDataHeader</a>,                 <span class="comment">// Raw (unfixed) user data header (TMPQUserData)</span>
<a name="l00371"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3adc9d2e7fb46b5897767196d43b4e383f">00371</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3adc9d2e7fb46b5897767196d43b4e383f">SFileMpqUserData</a>,                       <span class="comment">// MPQ USer data, without the header (BYTE [])</span>
<a name="l00372"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae9b6712848b58355a408f3daab83f96e">00372</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae9b6712848b58355a408f3daab83f96e">SFileMpqHeaderOffset</a>,                   <span class="comment">// Offset of the MPQ header (ULONGLONG)</span>
<a name="l00373"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a2c89240e1cb6ab15bd904d349454aa28">00373</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a2c89240e1cb6ab15bd904d349454aa28">SFileMpqHeaderSize</a>,                     <span class="comment">// Fixed size of the MPQ header</span>
<a name="l00374"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3abf8849fd539c2b9ef471ed7dc7fd2db1">00374</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3abf8849fd539c2b9ef471ed7dc7fd2db1">SFileMpqHeader</a>,                         <span class="comment">// Raw (unfixed) archive header (TMPQHeader)</span>
<a name="l00375"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a476e6fcb3d5f43970f887ac598556585">00375</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a476e6fcb3d5f43970f887ac598556585">SFileMpqHetTableOffset</a>,                 <span class="comment">// Offset of the HET table, relative to MPQ header (ULONGLONG)</span>
<a name="l00376"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a55c455cf9a5ed02df0394977077a9f49">00376</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a55c455cf9a5ed02df0394977077a9f49">SFileMpqHetTableSize</a>,                   <span class="comment">// Compressed size of the HET table (ULONGLONG)</span>
<a name="l00377"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a3fd7de9c4ab74548e75dee295e81fd52">00377</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a3fd7de9c4ab74548e75dee295e81fd52">SFileMpqHetHeader</a>,                      <span class="comment">// HET table header (TMPQHetHeader)</span>
<a name="l00378"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a97a82d443138c8cc728c481e10432325">00378</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a97a82d443138c8cc728c481e10432325">SFileMpqHetTable</a>,                       <span class="comment">// HET table as pointer. Must be freed using SFileFreeFileInfo</span>
<a name="l00379"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3aa4f4b7d0ffa6370a0422aa549f5e3bac">00379</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3aa4f4b7d0ffa6370a0422aa549f5e3bac">SFileMpqBetTableOffset</a>,                 <span class="comment">// Offset of the BET table, relative to MPQ header (ULONGLONG)</span>
<a name="l00380"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3af4b818adfb2d7cfa16ff245a18338eb5">00380</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3af4b818adfb2d7cfa16ff245a18338eb5">SFileMpqBetTableSize</a>,                   <span class="comment">// Compressed size of the BET table (ULONGLONG)</span>
<a name="l00381"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a105f024e278c43445c1c5ff1f8ea1f1b">00381</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a105f024e278c43445c1c5ff1f8ea1f1b">SFileMpqBetHeader</a>,                      <span class="comment">// BET table header, followed by the flags (TMPQBetHeader + DWORD[])</span>
<a name="l00382"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ab0cb978f8746ea272bbe0ac9878b43a0">00382</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ab0cb978f8746ea272bbe0ac9878b43a0">SFileMpqBetTable</a>,                       <span class="comment">// BET table as pointer. Must be freed using SFileFreeFileInfo</span>
<a name="l00383"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a6315b32e12c8d68c3e7e0e6be68cd3db">00383</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a6315b32e12c8d68c3e7e0e6be68cd3db">SFileMpqHashTableOffset</a>,                <span class="comment">// Hash table offset, relative to MPQ header (ULONGLONG)</span>
<a name="l00384"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ad90a58ed8a272c3f31ddd666113e3b1b">00384</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ad90a58ed8a272c3f31ddd666113e3b1b">SFileMpqHashTableSize64</a>,                <span class="comment">// Compressed size of the hash table (ULONGLONG)</span>
<a name="l00385"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a1d751d6d4f05c1b5f8b5c4767948aa06">00385</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a1d751d6d4f05c1b5f8b5c4767948aa06">SFileMpqHashTableSize</a>,                  <span class="comment">// Size of the hash table, in entries (DWORD)</span>
<a name="l00386"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a3ff802559cd74fa3f55ef039630f4d88">00386</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a3ff802559cd74fa3f55ef039630f4d88">SFileMpqHashTable</a>,                      <span class="comment">// Raw (unfixed) hash table (TMPQBlock [])</span>
<a name="l00387"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a167d10513bfa74b57afd388de41c7fd4">00387</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a167d10513bfa74b57afd388de41c7fd4">SFileMpqBlockTableOffset</a>,               <span class="comment">// Block table offset, relative to MPQ header (ULONGLONG)</span>
<a name="l00388"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3af39f8a570fbe2e3b3adb8ed81711680f">00388</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3af39f8a570fbe2e3b3adb8ed81711680f">SFileMpqBlockTableSize64</a>,               <span class="comment">// Compressed size of the block table (ULONGLONG)</span>
<a name="l00389"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3aaa004bf74465d3053cf255a8ce621a43">00389</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3aaa004bf74465d3053cf255a8ce621a43">SFileMpqBlockTableSize</a>,                 <span class="comment">// Size of the block table, in entries (DWORD)</span>
<a name="l00390"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae59d94899507065297ca567a4c2d0655">00390</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae59d94899507065297ca567a4c2d0655">SFileMpqBlockTable</a>,                     <span class="comment">// Raw (unfixed) block table (TMPQBlock [])</span>
<a name="l00391"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5b738a9c20b08546c02eed33084401c8">00391</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5b738a9c20b08546c02eed33084401c8">SFileMpqHiBlockTableOffset</a>,             <span class="comment">// Hi-block table offset, relative to MPQ header (ULONGLONG)</span>
<a name="l00392"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5e7fe06d85cb8e4bab77e9cc35e8d354">00392</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5e7fe06d85cb8e4bab77e9cc35e8d354">SFileMpqHiBlockTableSize64</a>,             <span class="comment">// Compressed size of the hi-block table (ULONGLONG)</span>
<a name="l00393"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a65ed9eb773b2039af8bf641c88c527c0">00393</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a65ed9eb773b2039af8bf641c88c527c0">SFileMpqHiBlockTable</a>,                   <span class="comment">// The hi-block table (USHORT [])</span>
<a name="l00394"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a2f12ee38d1f1fe0cf8adc58f36cabacd">00394</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a2f12ee38d1f1fe0cf8adc58f36cabacd">SFileMpqSignatures</a>,                     <span class="comment">// Signatures present in the MPQ (DWORD)</span>
<a name="l00395"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a23f3df00ce3c24ce8803771624604c00">00395</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a23f3df00ce3c24ce8803771624604c00">SFileMpqStrongSignatureOffset</a>,          <span class="comment">// Byte offset of the strong signature, relative to begin of the file (ULONGLONG)</span>
<a name="l00396"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3af011be22f9762d226813819a20241305">00396</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3af011be22f9762d226813819a20241305">SFileMpqStrongSignatureSize</a>,            <span class="comment">// Size of the strong signature (DWORD)</span>
<a name="l00397"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3aedae906162459673c4cbeebd17bad09b">00397</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3aedae906162459673c4cbeebd17bad09b">SFileMpqStrongSignature</a>,                <span class="comment">// The strong signature (BYTE [])</span>
<a name="l00398"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a4d0e602be713ff6a1d1d8e348360f42d">00398</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a4d0e602be713ff6a1d1d8e348360f42d">SFileMpqArchiveSize64</a>,                  <span class="comment">// Archive size from the header (ULONGLONG)</span>
<a name="l00399"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a9a16252d9bbd2c2e670ea78d6a054491">00399</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a9a16252d9bbd2c2e670ea78d6a054491">SFileMpqArchiveSize</a>,                    <span class="comment">// Archive size from the header (DWORD)</span>
<a name="l00400"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a4ef6ceed6897535cbce154d7d5edc1b3">00400</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a4ef6ceed6897535cbce154d7d5edc1b3">SFileMpqMaxFileCount</a>,                   <span class="comment">// Max number of files in the archive (DWORD)</span>
<a name="l00401"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a274c6fef3d8e74a8f82ac86bc9fb2924">00401</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a274c6fef3d8e74a8f82ac86bc9fb2924">SFileMpqFileTableSize</a>,                  <span class="comment">// Number of entries in the file table (DWORD)</span>
<a name="l00402"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5a11b123a8517ce48f7afa1a393b8e19">00402</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5a11b123a8517ce48f7afa1a393b8e19">SFileMpqSectorSize</a>,                     <span class="comment">// Sector size (DWORD)</span>
<a name="l00403"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a53b7024d554b409bd22e0ad589964cf4">00403</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a53b7024d554b409bd22e0ad589964cf4">SFileMpqNumberOfFiles</a>,                  <span class="comment">// Number of files (DWORD)</span>
<a name="l00404"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae4553d5ac5e1229fc6ef79e5e87041fe">00404</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae4553d5ac5e1229fc6ef79e5e87041fe">SFileMpqRawChunkSize</a>,                   <span class="comment">// Size of the raw data chunk for MD5</span>
<a name="l00405"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a61467b9f7e76bde17f3f83f4fbd6b73e">00405</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a61467b9f7e76bde17f3f83f4fbd6b73e">SFileMpqStreamFlags</a>,                    <span class="comment">// Stream flags (DWORD)</span>
<a name="l00406"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a594fea93132baf1ef09d535393ab7ef1">00406</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a594fea93132baf1ef09d535393ab7ef1">SFileMpqIsReadOnly</a>,                     <span class="comment">// Nonzero if the MPQ is read only (DWORD)</span>
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="comment">// Info classes for files</span>
<a name="l00409"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3abd4bc7d7c777f43efb5f22680b6f852d">00409</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3abd4bc7d7c777f43efb5f22680b6f852d">SFileInfoPatchChain</a>,                    <span class="comment">// Chain of patches where the file is (TCHAR [])</span>
<a name="l00410"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a142ae8882ece33970ef1b984fc4e3cbf">00410</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a142ae8882ece33970ef1b984fc4e3cbf">SFileInfoFileEntry</a>,                     <span class="comment">// The file entry for the file (TFileEntry)</span>
<a name="l00411"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a820fd5371b151b244ffd08393f8877e9">00411</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a820fd5371b151b244ffd08393f8877e9">SFileInfoHashEntry</a>,                     <span class="comment">// Hash table entry for the file (TMPQHash)</span>
<a name="l00412"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3acc9cd4f89a71bf69a6a70fe45b9a9ecf">00412</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3acc9cd4f89a71bf69a6a70fe45b9a9ecf">SFileInfoHashIndex</a>,                     <span class="comment">// Index of the hash table entry (DWORD)</span>
<a name="l00413"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ac63b8edf2c463ee184a571071c84abd3">00413</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ac63b8edf2c463ee184a571071c84abd3">SFileInfoNameHash1</a>,                     <span class="comment">// The first name hash in the hash table (DWORD)</span>
<a name="l00414"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a8e337bfdf364a4c3a253a9e80c5a5cdc">00414</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a8e337bfdf364a4c3a253a9e80c5a5cdc">SFileInfoNameHash2</a>,                     <span class="comment">// The second name hash in the hash table (DWORD)</span>
<a name="l00415"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5e0fdb5a3e5f95a0bce6b86916bcea56">00415</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a5e0fdb5a3e5f95a0bce6b86916bcea56">SFileInfoNameHash3</a>,                     <span class="comment">// 64-bit file name hash for the HET/BET tables (ULONGLONG)</span>
<a name="l00416"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a891d6032f0a540a2fed2021fa80f0376">00416</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a891d6032f0a540a2fed2021fa80f0376">SFileInfoLocale</a>,                        <span class="comment">// File locale (DWORD)</span>
<a name="l00417"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ac31921058e9e17c0901d2938abda5312">00417</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ac31921058e9e17c0901d2938abda5312">SFileInfoFileIndex</a>,                     <span class="comment">// Block index (DWORD)</span>
<a name="l00418"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a72601c2519d44d5dee8b069dacd51964">00418</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a72601c2519d44d5dee8b069dacd51964">SFileInfoByteOffset</a>,                    <span class="comment">// File position in the archive (ULONGLONG)</span>
<a name="l00419"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a8b376a37df412d4aa5f983a2f6211fcf">00419</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a8b376a37df412d4aa5f983a2f6211fcf">SFileInfoFileTime</a>,                      <span class="comment">// File time (ULONGLONG)</span>
<a name="l00420"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a3726b227a14fe257ae8aeb7be7d83437">00420</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a3726b227a14fe257ae8aeb7be7d83437">SFileInfoFileSize</a>,                      <span class="comment">// Size of the file (DWORD)</span>
<a name="l00421"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3afe2e60dff9fc8f6c6103e5697739229c">00421</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3afe2e60dff9fc8f6c6103e5697739229c">SFileInfoCompressedSize</a>,                <span class="comment">// Compressed file size (DWORD)</span>
<a name="l00422"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae19e7046a1be4813d81eeeaba366b582">00422</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3ae19e7046a1be4813d81eeeaba366b582">SFileInfoFlags</a>,                         <span class="comment">// File flags from (DWORD)</span>
<a name="l00423"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a74e085d098861aeebebff5d863f2ff83">00423</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a74e085d098861aeebebff5d863f2ff83">SFileInfoEncryptionKey</a>,                 <span class="comment">// File encryption key</span>
<a name="l00424"></a><a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a944e704c35366e96a180762c0efcc24e">00424</a>     <a class="code" href="_storm_lib_8h.html#a90f178cc391e156ead40ea74dc0414d3a944e704c35366e96a180762c0efcc24e">SFileInfoEncryptionKeyRaw</a>,              <span class="comment">// Unfixed value of the file key</span>
<a name="l00425"></a>00425 } <a class="code" href="_storm_lib_8h.html#a6baae4ba5804d36bbcb51e02bfac1a0b">SFileInfoClass</a>;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00428"></a>00428 <span class="comment">// Deprecated flags. These are going to be removed in next releases.</span>
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 <span class="comment">/*</span>
<a name="l00431"></a>00431 <span class="comment"></span>
<a name="l00432"></a>00432 <span class="comment">STORMLIB_DEPRECATED_FLAG(DWORD, STREAM_PROVIDER_LINEAR, STREAM_PROVIDER_FLAT);</span>
<a name="l00433"></a>00433 <span class="comment">STORMLIB_DEPRECATED_FLAG(DWORD, STREAM_PROVIDER_ENCRYPTED, STREAM_PROVIDER_MPQE);</span>
<a name="l00434"></a>00434 <span class="comment">STORMLIB_DEPRECATED_FLAG(DWORD, MPQ_OPEN_ENCRYPTED, STREAM_PROVIDER_MPQE);</span>
<a name="l00435"></a>00435 <span class="comment">STORMLIB_DEPRECATED_FLAG(DWORD, MPQ_OPEN_PARTIAL, STREAM_PROVIDER_PARTIAL);</span>
<a name="l00436"></a>00436 <span class="comment"></span>
<a name="l00437"></a>00437 <span class="comment">// MPQ_FILE_COMPRESSED is deprecated. Do not use.</span>
<a name="l00438"></a>00438 <span class="comment">STORMLIB_DEPRECATED_FLAG(DWORD, MPQ_FILE_COMPRESSED, MPQ_FILE_COMPRESS_MASK);</span>
<a name="l00439"></a>00439 <span class="comment"></span>
<a name="l00440"></a>00440 <span class="comment">// Legacy values for file info classes. Included for backward compatibility, do not use.</span>
<a name="l00441"></a>00441 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_ARCHIVE_NAME, SFileMpqFileName);</span>
<a name="l00442"></a>00442 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_ARCHIVE_SIZE, SFileMpqArchiveSize);</span>
<a name="l00443"></a>00443 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_MAX_FILE_COUNT, SFileMpqMaxFileCount);</span>
<a name="l00444"></a>00444 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_HASH_TABLE_SIZE, SFileMpqHashTableSize);</span>
<a name="l00445"></a>00445 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_BLOCK_TABLE_SIZE, SFileMpqBlockTableSize);</span>
<a name="l00446"></a>00446 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_SECTOR_SIZE, SFileMpqSectorSize);</span>
<a name="l00447"></a>00447 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_HASH_TABLE, SFileMpqHashTable);</span>
<a name="l00448"></a>00448 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_BLOCK_TABLE, SFileMpqBlockTable);</span>
<a name="l00449"></a>00449 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_NUM_FILES, SFileMpqNumberOfFiles);</span>
<a name="l00450"></a>00450 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_STREAM_FLAGS, SFileMpqStreamFlags);</span>
<a name="l00451"></a>00451 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_IS_READ_ONLY, SFileMpqIsReadOnly);</span>
<a name="l00452"></a>00452 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_HASH_INDEX, SFileInfoHashIndex);</span>
<a name="l00453"></a>00453 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_CODENAME1, SFileInfoNameHash1);</span>
<a name="l00454"></a>00454 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_CODENAME2, SFileInfoNameHash2);</span>
<a name="l00455"></a>00455 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_LOCALEID, SFileInfoLocale);</span>
<a name="l00456"></a>00456 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_BLOCKINDEX, SFileInfoFileIndex);</span>
<a name="l00457"></a>00457 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_FILE_SIZE, SFileInfoFileSize);</span>
<a name="l00458"></a>00458 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_COMPRESSED_SIZE, SFileInfoCompressedSize);</span>
<a name="l00459"></a>00459 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_FLAGS, SFileInfoFlags);</span>
<a name="l00460"></a>00460 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_POSITION, SFileInfoByteOffset);</span>
<a name="l00461"></a>00461 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_KEY, SFileInfoEncryptionKey);</span>
<a name="l00462"></a>00462 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_KEY_UNFIXED, SFileInfoEncryptionKeyRaw);</span>
<a name="l00463"></a>00463 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_FILETIME, SFileInfoFileTime);</span>
<a name="l00464"></a>00464 <span class="comment">STORMLIB_DEPRECATED_FLAG(SFileInfoClass, SFILE_INFO_PATCH_CHAIN, SFileInfoPatchChain);</span>
<a name="l00465"></a>00465 <span class="comment">*/</span>
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00468"></a>00468 <span class="comment">// Callback functions</span>
<a name="l00469"></a>00469 
<a name="l00470"></a>00470 <span class="comment">// Values for compact callback</span>
<a name="l00471"></a><a class="code" href="_storm_lib_8h.html#ad7ffa50e63fc72ab47e6b1d087fc3b21">00471</a> <span class="preprocessor">#define CCB_CHECKING_FILES                  1   // Checking archive (dwParam1 = current, dwParam2 = total)</span>
<a name="l00472"></a><a class="code" href="_storm_lib_8h.html#a427b681997ab8ad945bc7de89636989c">00472</a> <span class="preprocessor"></span><span class="preprocessor">#define CCB_CHECKING_HASH_TABLE             2   // Checking hash table (dwParam1 = current, dwParam2 = total)</span>
<a name="l00473"></a><a class="code" href="_storm_lib_8h.html#a17cc018bb22fca30c4198d9e1933f3e7">00473</a> <span class="preprocessor"></span><span class="preprocessor">#define CCB_COPYING_NON_MPQ_DATA            3   // Copying non-MPQ data: No params used</span>
<a name="l00474"></a><a class="code" href="_storm_lib_8h.html#a65304f71ca9a3f181511f124cb5b10cd">00474</a> <span class="preprocessor"></span><span class="preprocessor">#define CCB_COMPACTING_FILES                4   // Compacting archive (dwParam1 = current, dwParam2 = total)</span>
<a name="l00475"></a><a class="code" href="_storm_lib_8h.html#ab3f24feed60dcab56fc348d8c6e3bc42">00475</a> <span class="preprocessor"></span><span class="preprocessor">#define CCB_CLOSING_ARCHIVE                 5   // Closing archive: No params used</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span>                                      
<a name="l00477"></a><a class="code" href="_storm_lib_8h.html#aa7d6a26f9fa999e583ee66390dfe04fe">00477</a> <span class="keyword">typedef</span> void (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#aa7d6a26f9fa999e583ee66390dfe04fe">SFILE_DOWNLOAD_CALLBACK</a>)(<span class="keywordtype">void</span> * pvUserData, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> ByteOffset, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwTotalBytes);
<a name="l00478"></a><a class="code" href="_storm_lib_8h.html#aa079b6d9f0e997a0b4dff53ad112f603">00478</a> <span class="keyword">typedef</span> void (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#aa079b6d9f0e997a0b4dff53ad112f603">SFILE_ADDFILE_CALLBACK</a>)(<span class="keywordtype">void</span> * pvUserData, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwBytesWritten, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwTotalBytes, <span class="keywordtype">bool</span> bFinalCall);
<a name="l00479"></a><a class="code" href="_storm_lib_8h.html#a2a42639b325f48193ab2b5e0ef4b2800">00479</a> <span class="keyword">typedef</span> void (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#a2a42639b325f48193ab2b5e0ef4b2800">SFILE_COMPACT_CALLBACK</a>)(<span class="keywordtype">void</span> * pvUserData, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwWorkType, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> BytesProcessed, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> TotalBytes);
<a name="l00480"></a>00480 
<a name="l00481"></a><a class="code" href="_storm_lib_8h.html#a597f09cfd154b67f349544673729ce0f">00481</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_t_file_stream.html">TFileStream</a> <a class="code" href="struct_t_file_stream.html">TFileStream</a>;
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00484"></a>00484 <span class="comment">// Structure for bit arrays used for HET and BET tables</span>
<a name="l00485"></a>00485 
<a name="l00486"></a><a class="code" href="struct___t_bit_array.html">00486</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_bit_array.html">_TBitArray</a>
<a name="l00487"></a>00487 {
<a name="l00488"></a><a class="code" href="struct___t_bit_array.html#a33eda0e13be68e45b0100b7a80b90e4c">00488</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_bit_array.html#a33eda0e13be68e45b0100b7a80b90e4c">NumberOfBytes</a>;                        <span class="comment">// Total number of bytes in &quot;Elements&quot;</span>
<a name="l00489"></a><a class="code" href="struct___t_bit_array.html#ad7bd2af0d304c87ba417036fcf059581">00489</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_bit_array.html#ad7bd2af0d304c87ba417036fcf059581">NumberOfBits</a>;                         <span class="comment">// Total number of bits that are available</span>
<a name="l00490"></a><a class="code" href="struct___t_bit_array.html#af7e1d973aa16a0e22819e27b997032f0">00490</a>     <a class="code" href="_storm_port_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> <a class="code" href="struct___t_bit_array.html#af7e1d973aa16a0e22819e27b997032f0">Elements</a>[1];                           <span class="comment">// Array of elements (variable length)</span>
<a name="l00491"></a>00491 } <a class="code" href="_storm_lib_8h.html#abd1afdb679de6923062276d476d1d35e">TBitArray</a>;
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 <span class="keywordtype">void</span> <a class="code" href="_s_base_file_table_8cpp.html#a8b7cf3b06d4cc7779a95a0ef92172269">GetBits</a>(<a class="code" href="struct___t_bit_array.html">TBitArray</a> * array, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBitPosition, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBitLength, <span class="keywordtype">void</span> * pvBuffer, <span class="keywordtype">int</span> nResultSize);
<a name="l00494"></a>00494 <span class="keywordtype">void</span> <a class="code" href="_s_base_file_table_8cpp.html#a7e3dbff814293faac1f316aa85f0dcf7">SetBits</a>(<a class="code" href="struct___t_bit_array.html">TBitArray</a> * array, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBitPosition, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBitLength, <span class="keywordtype">void</span> * pvBuffer, <span class="keywordtype">int</span> nResultSize);
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00497"></a>00497 <span class="comment">// Structures related to MPQ format</span>
<a name="l00498"></a>00498 <span class="comment">//</span>
<a name="l00499"></a>00499 <span class="comment">// Note: All structures in this header file are supposed to remain private</span>
<a name="l00500"></a>00500 <span class="comment">// to StormLib. The structures may (and will) change over time, as the MPQ</span>
<a name="l00501"></a>00501 <span class="comment">// file format evolves. Programmers directly using these structures need to</span>
<a name="l00502"></a>00502 <span class="comment">// be aware of this. And the last, but not least, NEVER do any modifications</span>
<a name="l00503"></a>00503 <span class="comment">// to those structures directly, always use SFile* functions.</span>
<a name="l00504"></a>00504 <span class="comment">//</span>
<a name="l00505"></a>00505 
<a name="l00506"></a><a class="code" href="_storm_lib_8h.html#ae490c625dc0aa427dcb416343535962f">00506</a> <span class="preprocessor">#define MPQ_HEADER_SIZE_V1    0x20</span>
<a name="l00507"></a><a class="code" href="_storm_lib_8h.html#a24f7c58508f7acb3c43b26d26e42b815">00507</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_HEADER_SIZE_V2    0x2C</span>
<a name="l00508"></a><a class="code" href="_storm_lib_8h.html#a0fd750fe0d2b6602260de86343be8a87">00508</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_HEADER_SIZE_V3    0x44</span>
<a name="l00509"></a><a class="code" href="_storm_lib_8h.html#a34534a41943b28cb7855dd59db96166e">00509</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_HEADER_SIZE_V4    0xD0</span>
<a name="l00510"></a><a class="code" href="_storm_lib_8h.html#af15a614080a5231006e0381b3c715760">00510</a> <span class="preprocessor"></span><span class="preprocessor">#define MPQ_HEADER_DWORDS     (MPQ_HEADER_SIZE_V4 / 0x04)</span>
<a name="l00511"></a>00511 <span class="preprocessor"></span>
<a name="l00512"></a><a class="code" href="struct___t_m_p_q_user_data.html">00512</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_user_data.html">_TMPQUserData</a>
<a name="l00513"></a>00513 {
<a name="l00514"></a>00514     <span class="comment">// The ID_MPQ_USERDATA (&#39;MPQ\x1B&#39;) signature</span>
<a name="l00515"></a><a class="code" href="struct___t_m_p_q_user_data.html#a20555748138f5e58cd38f6dd7fa3a5f1">00515</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_user_data.html#a20555748138f5e58cd38f6dd7fa3a5f1">dwID</a>;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <span class="comment">// Maximum size of the user data</span>
<a name="l00518"></a><a class="code" href="struct___t_m_p_q_user_data.html#a77cc17fb272f95a626ff0358215d614d">00518</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_user_data.html#a77cc17fb272f95a626ff0358215d614d">cbUserDataSize</a>;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     <span class="comment">// Offset of the MPQ header, relative to the begin of this header</span>
<a name="l00521"></a><a class="code" href="struct___t_m_p_q_user_data.html#a120d3541bbc5279d8121bcb958ffac43">00521</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_user_data.html#a120d3541bbc5279d8121bcb958ffac43">dwHeaderOffs</a>;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523     <span class="comment">// Appears to be size of user data header (Starcraft II maps)</span>
<a name="l00524"></a><a class="code" href="struct___t_m_p_q_user_data.html#a8c5ab8213401a02bd752f77609bea504">00524</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_user_data.html#a8c5ab8213401a02bd752f77609bea504">cbUserDataHeader</a>;
<a name="l00525"></a>00525 } <a class="code" href="_storm_lib_8h.html#a10dc6fad093faef1112c00793954daf9">TMPQUserData</a>;
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 <span class="comment">// MPQ file header</span>
<a name="l00528"></a>00528 <span class="comment">//</span>
<a name="l00529"></a>00529 <span class="comment">// We have to make sure that the header is packed OK.</span>
<a name="l00530"></a>00530 <span class="comment">// Reason: A 64-bit integer at the beginning of 3.0 part,</span>
<a name="l00531"></a>00531 <span class="comment">// which is offset 0x2C</span>
<a name="l00532"></a>00532 <span class="preprocessor">#pragma pack(push, 1)</span>
<a name="l00533"></a><a class="code" href="struct___t_m_p_q_header.html">00533</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_header.html">_TMPQHeader</a>
<a name="l00534"></a>00534 {
<a name="l00535"></a>00535     <span class="comment">// The ID_MPQ (&#39;MPQ\x1A&#39;) signature</span>
<a name="l00536"></a><a class="code" href="struct___t_m_p_q_header.html#ae383ee3cfeac2520be29344bae32e94c">00536</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#ae383ee3cfeac2520be29344bae32e94c">dwID</a>;
<a name="l00537"></a>00537 
<a name="l00538"></a>00538     <span class="comment">// Size of the archive header</span>
<a name="l00539"></a><a class="code" href="struct___t_m_p_q_header.html#a2243a0f4cd3bfcf873062421b063781a">00539</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#a2243a0f4cd3bfcf873062421b063781a">dwHeaderSize</a>;
<a name="l00540"></a>00540 
<a name="l00541"></a>00541     <span class="comment">// 32-bit size of MPQ archive</span>
<a name="l00542"></a>00542     <span class="comment">// This field is deprecated in the Burning Crusade MoPaQ format, and the size of the archive</span>
<a name="l00543"></a>00543     <span class="comment">// is calculated as the size from the beginning of the archive to the end of the hash table,</span>
<a name="l00544"></a>00544     <span class="comment">// block table, or hi-block table (whichever is largest).</span>
<a name="l00545"></a><a class="code" href="struct___t_m_p_q_header.html#a4557744f91726c1d4f7f8a3db05ee3e0">00545</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#a4557744f91726c1d4f7f8a3db05ee3e0">dwArchiveSize</a>;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547     <span class="comment">// 0 = Format 1 (up to The Burning Crusade)</span>
<a name="l00548"></a>00548     <span class="comment">// 1 = Format 2 (The Burning Crusade and newer)</span>
<a name="l00549"></a>00549     <span class="comment">// 2 = Format 3 (WoW - Cataclysm beta or newer)</span>
<a name="l00550"></a>00550     <span class="comment">// 3 = Format 4 (WoW - Cataclysm beta or newer)</span>
<a name="l00551"></a><a class="code" href="struct___t_m_p_q_header.html#a26c350cb08d35f2ffc4e75c380ed7901">00551</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_header.html#a26c350cb08d35f2ffc4e75c380ed7901">wFormatVersion</a>;
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     <span class="comment">// Power of two exponent specifying the number of 512-byte disk sectors in each file sector</span>
<a name="l00554"></a>00554     <span class="comment">// in the archive. The size of each file sector in the archive is 512 * 2 ^ wSectorSize.</span>
<a name="l00555"></a><a class="code" href="struct___t_m_p_q_header.html#aa6c9ec440342dfb5ab49bb0d0de3be19">00555</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_header.html#aa6c9ec440342dfb5ab49bb0d0de3be19">wSectorSize</a>;
<a name="l00556"></a>00556 
<a name="l00557"></a>00557     <span class="comment">// Offset to the beginning of the hash table, relative to the beginning of the archive.</span>
<a name="l00558"></a><a class="code" href="struct___t_m_p_q_header.html#acc150d84abed1f5c39b08e518fa9d7e7">00558</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#acc150d84abed1f5c39b08e518fa9d7e7">dwHashTablePos</a>;
<a name="l00559"></a>00559     
<a name="l00560"></a>00560     <span class="comment">// Offset to the beginning of the block table, relative to the beginning of the archive.</span>
<a name="l00561"></a><a class="code" href="struct___t_m_p_q_header.html#ac0cd7ad2175e7713f1ab6e652c305f9d">00561</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#ac0cd7ad2175e7713f1ab6e652c305f9d">dwBlockTablePos</a>;
<a name="l00562"></a>00562     
<a name="l00563"></a>00563     <span class="comment">// Number of entries in the hash table. Must be a power of two, and must be less than 2^16 for</span>
<a name="l00564"></a>00564     <span class="comment">// the original MoPaQ format, or less than 2^20 for the Burning Crusade format.</span>
<a name="l00565"></a><a class="code" href="struct___t_m_p_q_header.html#a67f1869dadee712c8210f77ce69cbfa9">00565</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#a67f1869dadee712c8210f77ce69cbfa9">dwHashTableSize</a>;
<a name="l00566"></a>00566     
<a name="l00567"></a>00567     <span class="comment">// Number of entries in the block table</span>
<a name="l00568"></a><a class="code" href="struct___t_m_p_q_header.html#ad63fd2d3c6c0d1e67d4023c92b130b3b">00568</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#ad63fd2d3c6c0d1e67d4023c92b130b3b">dwBlockTableSize</a>;
<a name="l00569"></a>00569 
<a name="l00570"></a>00570     <span class="comment">//-- MPQ HEADER v 2 -------------------------------------------</span>
<a name="l00571"></a>00571 
<a name="l00572"></a>00572     <span class="comment">// Offset to the beginning of array of 16-bit high parts of file offsets.</span>
<a name="l00573"></a><a class="code" href="struct___t_m_p_q_header.html#ac22724a3b16bc3352a0dff72495d39a6">00573</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#ac22724a3b16bc3352a0dff72495d39a6">HiBlockTablePos64</a>;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575     <span class="comment">// High 16 bits of the hash table offset for large archives.</span>
<a name="l00576"></a><a class="code" href="struct___t_m_p_q_header.html#aa11ca5528aff4f3901967ea28919d3ee">00576</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_header.html#aa11ca5528aff4f3901967ea28919d3ee">wHashTablePosHi</a>;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578     <span class="comment">// High 16 bits of the block table offset for large archives.</span>
<a name="l00579"></a><a class="code" href="struct___t_m_p_q_header.html#a5b94172d822a2348f6952a900c9a67b6">00579</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_header.html#a5b94172d822a2348f6952a900c9a67b6">wBlockTablePosHi</a>;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="comment">//-- MPQ HEADER v 3 -------------------------------------------</span>
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     <span class="comment">// 64-bit version of the archive size</span>
<a name="l00584"></a><a class="code" href="struct___t_m_p_q_header.html#a41fd63853e752056e6928d90e76e2299">00584</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#a41fd63853e752056e6928d90e76e2299">ArchiveSize64</a>;
<a name="l00585"></a>00585 
<a name="l00586"></a>00586     <span class="comment">// 64-bit position of the BET table</span>
<a name="l00587"></a><a class="code" href="struct___t_m_p_q_header.html#a6b14b9ec494cc3ecff09bfec81a41bca">00587</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#a6b14b9ec494cc3ecff09bfec81a41bca">BetTablePos64</a>;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589     <span class="comment">// 64-bit position of the HET table</span>
<a name="l00590"></a><a class="code" href="struct___t_m_p_q_header.html#a2bde025233503af80b7adb206a2c7c5f">00590</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#a2bde025233503af80b7adb206a2c7c5f">HetTablePos64</a>;
<a name="l00591"></a>00591 
<a name="l00592"></a>00592     <span class="comment">//-- MPQ HEADER v 4 -------------------------------------------</span>
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <span class="comment">// Compressed size of the hash table</span>
<a name="l00595"></a><a class="code" href="struct___t_m_p_q_header.html#aacaa38b5b060df20bd8185fbbcbb2c05">00595</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#aacaa38b5b060df20bd8185fbbcbb2c05">HashTableSize64</a>;
<a name="l00596"></a>00596 
<a name="l00597"></a>00597     <span class="comment">// Compressed size of the block table</span>
<a name="l00598"></a><a class="code" href="struct___t_m_p_q_header.html#a49a8c685ecb568b7cc34a7d869d9eb36">00598</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#a49a8c685ecb568b7cc34a7d869d9eb36">BlockTableSize64</a>;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600     <span class="comment">// Compressed size of the hi-block table</span>
<a name="l00601"></a><a class="code" href="struct___t_m_p_q_header.html#ab94daea97aa276ddda65853f8713b281">00601</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#ab94daea97aa276ddda65853f8713b281">HiBlockTableSize64</a>;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603     <span class="comment">// Compressed size of the HET block</span>
<a name="l00604"></a><a class="code" href="struct___t_m_p_q_header.html#a55ca5cca128bc0f3a19963f584ee21ea">00604</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#a55ca5cca128bc0f3a19963f584ee21ea">HetTableSize64</a>;
<a name="l00605"></a>00605 
<a name="l00606"></a>00606     <span class="comment">// Compressed size of the BET block</span>
<a name="l00607"></a><a class="code" href="struct___t_m_p_q_header.html#a3e0f089c07641c31742d8003a018e4d9">00607</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_m_p_q_header.html#a3e0f089c07641c31742d8003a018e4d9">BetTableSize64</a>;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     <span class="comment">// Size of raw data chunk to calculate MD5.</span>
<a name="l00610"></a>00610     <span class="comment">// MD5 of each data chunk follows the raw file data.</span>
<a name="l00611"></a><a class="code" href="struct___t_m_p_q_header.html#a0885c9723a608bc143ebe2f4bbac15de">00611</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_header.html#a0885c9723a608bc143ebe2f4bbac15de">dwRawChunkSize</a>;                                 
<a name="l00612"></a>00612 
<a name="l00613"></a>00613     <span class="comment">// MD5 of MPQ tables</span>
<a name="l00614"></a><a class="code" href="struct___t_m_p_q_header.html#a94b84810438ca81a47e4d76161c69982">00614</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct___t_m_p_q_header.html#a94b84810438ca81a47e4d76161c69982">MD5_BlockTable</a>[MD5_DIGEST_SIZE];      <span class="comment">// MD5 of the block table before decryption</span>
<a name="l00615"></a><a class="code" href="struct___t_m_p_q_header.html#a15584082486c95a8a276f11db3d7d925">00615</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct___t_m_p_q_header.html#a15584082486c95a8a276f11db3d7d925">MD5_HashTable</a>[MD5_DIGEST_SIZE];       <span class="comment">// MD5 of the hash table before decryption</span>
<a name="l00616"></a><a class="code" href="struct___t_m_p_q_header.html#a6e4123be184f03b07805173246f86fe4">00616</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct___t_m_p_q_header.html#a6e4123be184f03b07805173246f86fe4">MD5_HiBlockTable</a>[MD5_DIGEST_SIZE];    <span class="comment">// MD5 of the hi-block table</span>
<a name="l00617"></a><a class="code" href="struct___t_m_p_q_header.html#a1cbd9da1bd31e2b87e7c9f0a77d20c12">00617</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct___t_m_p_q_header.html#a1cbd9da1bd31e2b87e7c9f0a77d20c12">MD5_BetTable</a>[MD5_DIGEST_SIZE];        <span class="comment">// MD5 of the BET table before decryption</span>
<a name="l00618"></a><a class="code" href="struct___t_m_p_q_header.html#aabcf5d5db0341098e25ec822f734a5fb">00618</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct___t_m_p_q_header.html#aabcf5d5db0341098e25ec822f734a5fb">MD5_HetTable</a>[MD5_DIGEST_SIZE];        <span class="comment">// MD5 of the HET table before decryption</span>
<a name="l00619"></a><a class="code" href="struct___t_m_p_q_header.html#a427cddb81d036d81c4b97198c79d7db4">00619</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct___t_m_p_q_header.html#a427cddb81d036d81c4b97198c79d7db4">MD5_MpqHeader</a>[MD5_DIGEST_SIZE];       <span class="comment">// MD5 of the MPQ header from signature to (including) MD5_HetTable</span>
<a name="l00620"></a>00620 } <a class="code" href="_storm_lib_8h.html#a3bc4dadbbcd9c2f71ddda5e65360a56d">TMPQHeader</a>;
<a name="l00621"></a>00621 <span class="preprocessor">#pragma pack(pop)</span>
<a name="l00622"></a>00622 <span class="preprocessor"></span>
<a name="l00623"></a>00623 <span class="comment">// Hash table entry. All files in the archive are searched by their hashes.</span>
<a name="l00624"></a><a class="code" href="struct___t_m_p_q_hash.html">00624</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_hash.html">_TMPQHash</a>
<a name="l00625"></a>00625 {
<a name="l00626"></a>00626     <span class="comment">// The hash of the file path, using method A.</span>
<a name="l00627"></a><a class="code" href="struct___t_m_p_q_hash.html#a696c4e84a6fe64e4307dac7e06a1c907">00627</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_hash.html#a696c4e84a6fe64e4307dac7e06a1c907">dwName1</a>;
<a name="l00628"></a>00628     
<a name="l00629"></a>00629     <span class="comment">// The hash of the file path, using method B.</span>
<a name="l00630"></a><a class="code" href="struct___t_m_p_q_hash.html#ad005ba7c70d25b34c5756db9ce29c304">00630</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_hash.html#ad005ba7c70d25b34c5756db9ce29c304">dwName2</a>;
<a name="l00631"></a>00631 
<a name="l00632"></a>00632 <span class="preprocessor">#ifdef PLATFORM_LITTLE_ENDIAN</span>
<a name="l00633"></a>00633 <span class="preprocessor"></span>
<a name="l00634"></a>00634     <span class="comment">// The language of the file. This is a Windows LANGID data type, and uses the same values.</span>
<a name="l00635"></a>00635     <span class="comment">// 0 indicates the default language (American English), or that the file is language-neutral.</span>
<a name="l00636"></a><a class="code" href="struct___t_m_p_q_hash.html#a29f2c26e9232bc9559afdf95c98947c3">00636</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_hash.html#a29f2c26e9232bc9559afdf95c98947c3">lcLocale</a>;
<a name="l00637"></a>00637 
<a name="l00638"></a>00638     <span class="comment">// The platform the file is used for. 0 indicates the default platform.</span>
<a name="l00639"></a>00639     <span class="comment">// No other values have been observed.</span>
<a name="l00640"></a>00640     <span class="comment">// Note: wPlatform is actually just BYTE, but since it has never been used, we don&#39;t care.</span>
<a name="l00641"></a><a class="code" href="struct___t_m_p_q_hash.html#a45c2d0c5f54a2e223a5b79c68ca98f28">00641</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_hash.html#a45c2d0c5f54a2e223a5b79c68ca98f28">wPlatform</a>;
<a name="l00642"></a>00642 
<a name="l00643"></a>00643 <span class="preprocessor">#else</span>
<a name="l00644"></a>00644 <span class="preprocessor"></span>
<a name="l00645"></a>00645     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_hash.html#a45c2d0c5f54a2e223a5b79c68ca98f28">wPlatform</a>;
<a name="l00646"></a>00646     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a> <a class="code" href="struct___t_m_p_q_hash.html#a29f2c26e9232bc9559afdf95c98947c3">lcLocale</a>;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648 <span class="preprocessor">#endif</span>
<a name="l00649"></a>00649 <span class="preprocessor"></span>
<a name="l00650"></a>00650     <span class="comment">// If the hash table entry is valid, this is the index into the block table of the file.</span>
<a name="l00651"></a>00651     <span class="comment">// Otherwise, one of the following two values:</span>
<a name="l00652"></a>00652     <span class="comment">//  - FFFFFFFFh: Hash table entry is empty, and has always been empty.</span>
<a name="l00653"></a>00653     <span class="comment">//               Terminates searches for a given file.</span>
<a name="l00654"></a>00654     <span class="comment">//  - FFFFFFFEh: Hash table entry is empty, but was valid at some point (a deleted file).</span>
<a name="l00655"></a>00655     <span class="comment">//               Does not terminate searches for a given file.</span>
<a name="l00656"></a><a class="code" href="struct___t_m_p_q_hash.html#adf2f532039f9b29034477e04a71be3af">00656</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_hash.html#adf2f532039f9b29034477e04a71be3af">dwBlockIndex</a>;
<a name="l00657"></a>00657 } <a class="code" href="_storm_lib_8h.html#a62bcdb516cd210bb55f628774aec684c">TMPQHash</a>;
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 <span class="comment">// File description block contains informations about the file</span>
<a name="l00660"></a><a class="code" href="struct___t_m_p_q_block.html">00660</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_block.html">_TMPQBlock</a>
<a name="l00661"></a>00661 {
<a name="l00662"></a>00662     <span class="comment">// Offset of the beginning of the file, relative to the beginning of the archive.</span>
<a name="l00663"></a><a class="code" href="struct___t_m_p_q_block.html#ab975905909e2e0e7d38cc7d2379c5167">00663</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_block.html#ab975905909e2e0e7d38cc7d2379c5167">dwFilePos</a>;
<a name="l00664"></a>00664     
<a name="l00665"></a>00665     <span class="comment">// Compressed file size</span>
<a name="l00666"></a><a class="code" href="struct___t_m_p_q_block.html#acac231ce29cb58e76c6394787e318548">00666</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_block.html#acac231ce29cb58e76c6394787e318548">dwCSize</a>;
<a name="l00667"></a>00667     
<a name="l00668"></a>00668     <span class="comment">// Only valid if the block is a file; otherwise meaningless, and should be 0.</span>
<a name="l00669"></a>00669     <span class="comment">// If the file is compressed, this is the size of the uncompressed file data.</span>
<a name="l00670"></a><a class="code" href="struct___t_m_p_q_block.html#ab91379a7a2d1e9c47221406b7342b41e">00670</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_block.html#ab91379a7a2d1e9c47221406b7342b41e">dwFSize</a>;                      
<a name="l00671"></a>00671     
<a name="l00672"></a>00672     <span class="comment">// Flags for the file. See MPQ_FILE_XXXX constants</span>
<a name="l00673"></a><a class="code" href="struct___t_m_p_q_block.html#a01ac2a8413155b8cfeaf70451cd957c6">00673</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_block.html#a01ac2a8413155b8cfeaf70451cd957c6">dwFlags</a>;                      
<a name="l00674"></a>00674 } <a class="code" href="_storm_lib_8h.html#a5a092b4c56fb9c724fee54c3c24ca3f2">TMPQBlock</a>;
<a name="l00675"></a>00675 
<a name="l00676"></a>00676 <span class="comment">// Patch file information, preceding the sector offset table</span>
<a name="l00677"></a><a class="code" href="struct___t_patch_info.html">00677</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_patch_info.html">_TPatchInfo</a>
<a name="l00678"></a>00678 {
<a name="l00679"></a><a class="code" href="struct___t_patch_info.html#ab2bbce2ef9bd815274d9c638b27858c0">00679</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_info.html#ab2bbce2ef9bd815274d9c638b27858c0">dwLength</a>;                             <span class="comment">// Length of patch info header, in bytes</span>
<a name="l00680"></a><a class="code" href="struct___t_patch_info.html#acd63852613db8c0c20fe6a9f93ec3ced">00680</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_info.html#acd63852613db8c0c20fe6a9f93ec3ced">dwFlags</a>;                              <span class="comment">// Flags. 0x80000000 = MD5 (?)</span>
<a name="l00681"></a><a class="code" href="struct___t_patch_info.html#a9ae819807f601644d5b8207906e5aaa2">00681</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_info.html#a9ae819807f601644d5b8207906e5aaa2">dwDataSize</a>;                           <span class="comment">// Uncompressed size of the patch file</span>
<a name="l00682"></a><a class="code" href="struct___t_patch_info.html#ac5bc9cd5608eb5235e0ccf412d2b573e">00682</a>     <a class="code" href="_storm_port_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>  <a class="code" href="struct___t_patch_info.html#ac5bc9cd5608eb5235e0ccf412d2b573e">md5</a>[0x10];                            <span class="comment">// MD5 of the entire patch file after decompression</span>
<a name="l00683"></a>00683 
<a name="l00684"></a>00684     <span class="comment">// Followed by the sector table (variable length)</span>
<a name="l00685"></a>00685 } <a class="code" href="_storm_lib_8h.html#a21a06bd36a9ee522c0514f4ef2a4c515">TPatchInfo</a>;
<a name="l00686"></a>00686 
<a name="l00687"></a>00687 <span class="comment">// Header for PTCH files </span>
<a name="l00688"></a><a class="code" href="struct___t_patch_header.html">00688</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_patch_header.html">_TPatchHeader</a>
<a name="l00689"></a>00689 {
<a name="l00690"></a>00690     <span class="comment">//-- PATCH header -----------------------------------</span>
<a name="l00691"></a><a class="code" href="struct___t_patch_header.html#a3348378f539740ddd9e26da60ae7451e">00691</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#a3348378f539740ddd9e26da60ae7451e">dwSignature</a>;                          <span class="comment">// &#39;PTCH&#39;</span>
<a name="l00692"></a><a class="code" href="struct___t_patch_header.html#a95c0e3e83498fb829c989722660b64e2">00692</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#a95c0e3e83498fb829c989722660b64e2">dwSizeOfPatchData</a>;                    <span class="comment">// Size of the entire patch (decompressed)</span>
<a name="l00693"></a><a class="code" href="struct___t_patch_header.html#a2c05985a07a9ba7a629bf3a910229395">00693</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#a2c05985a07a9ba7a629bf3a910229395">dwSizeBeforePatch</a>;                    <span class="comment">// Size of the file before patch</span>
<a name="l00694"></a><a class="code" href="struct___t_patch_header.html#a299ad3d76dce3d7bc435464becf42440">00694</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#a299ad3d76dce3d7bc435464becf42440">dwSizeAfterPatch</a>;                     <span class="comment">// Size of file after patch</span>
<a name="l00695"></a>00695     
<a name="l00696"></a>00696     <span class="comment">//-- MD5 block --------------------------------------</span>
<a name="l00697"></a><a class="code" href="struct___t_patch_header.html#a246f24ab7907d3caca92e222b0908d37">00697</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#a246f24ab7907d3caca92e222b0908d37">dwMD5</a>;                                <span class="comment">// &#39;MD5_&#39;</span>
<a name="l00698"></a><a class="code" href="struct___t_patch_header.html#ad05b91ec48807ff3b21183d4aedf8367">00698</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#ad05b91ec48807ff3b21183d4aedf8367">dwMd5BlockSize</a>;                       <span class="comment">// Size of the MD5 block, including the signature and size itself</span>
<a name="l00699"></a><a class="code" href="struct___t_patch_header.html#a76b64e0f4d1c3f1fb6508c0d921b3dd6">00699</a>     <a class="code" href="_storm_port_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> <a class="code" href="struct___t_patch_header.html#a76b64e0f4d1c3f1fb6508c0d921b3dd6">md5_before_patch</a>[0x10];                <span class="comment">// MD5 of the original (unpached) file</span>
<a name="l00700"></a><a class="code" href="struct___t_patch_header.html#abfce852056dff61c6ec2a63c7f54e045">00700</a>     <a class="code" href="_storm_port_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> <a class="code" href="struct___t_patch_header.html#abfce852056dff61c6ec2a63c7f54e045">md5_after_patch</a>[0x10];                 <span class="comment">// MD5 of the patched file</span>
<a name="l00701"></a>00701 
<a name="l00702"></a>00702     <span class="comment">//-- XFRM block -------------------------------------</span>
<a name="l00703"></a><a class="code" href="struct___t_patch_header.html#ad217fc1107160e21ec4f8683ed6c97cd">00703</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#ad217fc1107160e21ec4f8683ed6c97cd">dwXFRM</a>;                               <span class="comment">// &#39;XFRM&#39;</span>
<a name="l00704"></a><a class="code" href="struct___t_patch_header.html#a2d924b1ec8fd416cd21d6efde5eee30e">00704</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#a2d924b1ec8fd416cd21d6efde5eee30e">dwXfrmBlockSize</a>;                      <span class="comment">// Size of the XFRM block, includes XFRM header and patch data</span>
<a name="l00705"></a><a class="code" href="struct___t_patch_header.html#a00e42ac5fada677c622fd7378f95955e">00705</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_patch_header.html#a00e42ac5fada677c622fd7378f95955e">dwPatchType</a>;                          <span class="comment">// Type of patch (&#39;BSD0&#39; or &#39;COPY&#39;)</span>
<a name="l00706"></a>00706 
<a name="l00707"></a>00707     <span class="comment">// Followed by the patch data</span>
<a name="l00708"></a>00708 } <a class="code" href="_storm_lib_8h.html#a8bc19a93453743ff96e6f9ed195ff117">TPatchHeader</a>;
<a name="l00709"></a>00709 
<a name="l00710"></a><a class="code" href="_storm_lib_8h.html#ad7ec40c870b41fa7fdb7a60e68a7ca96">00710</a> <span class="preprocessor">#define SIZE_OF_XFRM_HEADER  0x0C</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>
<a name="l00712"></a>00712 <span class="comment">// This is the combined file entry for maintaining file list in the MPQ.</span>
<a name="l00713"></a>00713 <span class="comment">// This structure is combined from block table, hi-block table,</span>
<a name="l00714"></a>00714 <span class="comment">// (attributes) file and from (listfile).</span>
<a name="l00715"></a><a class="code" href="struct___t_file_entry.html">00715</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_file_entry.html">_TFileEntry</a>
<a name="l00716"></a>00716 {
<a name="l00717"></a><a class="code" href="struct___t_file_entry.html#a0813b376166461382eb1e86784cdc8cc">00717</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_file_entry.html#a0813b376166461382eb1e86784cdc8cc">FileNameHash</a>;                     <span class="comment">// Jenkins hash of the file name. Only used when the MPQ has BET table.</span>
<a name="l00718"></a><a class="code" href="struct___t_file_entry.html#a4aa00b411c027d71b59b61d31025397a">00718</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_file_entry.html#a4aa00b411c027d71b59b61d31025397a">ByteOffset</a>;                       <span class="comment">// Position of the file content in the MPQ, relative to the MPQ header</span>
<a name="l00719"></a><a class="code" href="struct___t_file_entry.html#a642c4c57f60732e0daef2343acd443f5">00719</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_file_entry.html#a642c4c57f60732e0daef2343acd443f5">FileTime</a>;                         <span class="comment">// FileTime from the (attributes) file. 0 if not present.</span>
<a name="l00720"></a><a class="code" href="struct___t_file_entry.html#a6f5731cc569dc8f83e4a36eb3baadaef">00720</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>     <a class="code" href="struct___t_file_entry.html#a6f5731cc569dc8f83e4a36eb3baadaef">dwHashIndex</a>;                      <span class="comment">// Index to the hash table. Only used when the MPQ has classic hash table</span>
<a name="l00721"></a><a class="code" href="struct___t_file_entry.html#ac1d03293cafba09c581d1ce3b20cce11">00721</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>     <a class="code" href="struct___t_file_entry.html#ac1d03293cafba09c581d1ce3b20cce11">dwFileSize</a>;                       <span class="comment">// Decompressed size of the file</span>
<a name="l00722"></a><a class="code" href="struct___t_file_entry.html#af0800e75c1cfe47b9fdab963b33c003d">00722</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>     <a class="code" href="struct___t_file_entry.html#af0800e75c1cfe47b9fdab963b33c003d">dwCmpSize</a>;                        <span class="comment">// Compressed size of the file (i.e., size of the file data in the MPQ)</span>
<a name="l00723"></a><a class="code" href="struct___t_file_entry.html#aac45e6e4f80c412a0204abd334bc7f9b">00723</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>     <a class="code" href="struct___t_file_entry.html#aac45e6e4f80c412a0204abd334bc7f9b">dwFlags</a>;                          <span class="comment">// File flags (from block table)</span>
<a name="l00724"></a><a class="code" href="struct___t_file_entry.html#a1cc2c4c6a9dfe691577c5289c09b91dd">00724</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a>    <a class="code" href="struct___t_file_entry.html#a1cc2c4c6a9dfe691577c5289c09b91dd">lcLocale</a>;                         <span class="comment">// Locale ID for the file</span>
<a name="l00725"></a><a class="code" href="struct___t_file_entry.html#a6f5c11c74284bdecdef2e655a72ee33a">00725</a>     <a class="code" href="_storm_port_8h.html#a5850d5316caf7f4cedd742fdf8cd7c02">USHORT</a>    <a class="code" href="struct___t_file_entry.html#a6f5c11c74284bdecdef2e655a72ee33a">wPlatform</a>;                        <span class="comment">// Platform ID for the file</span>
<a name="l00726"></a><a class="code" href="struct___t_file_entry.html#a06fcb7c74ebf45703eed4543dc1593fc">00726</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>     <a class="code" href="struct___t_file_entry.html#a06fcb7c74ebf45703eed4543dc1593fc">dwCrc32</a>;                          <span class="comment">// CRC32 from (attributes) file. 0 if not present.</span>
<a name="l00727"></a><a class="code" href="struct___t_file_entry.html#a041d1a2b52759640cbea24d0d5e99ff6">00727</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct___t_file_entry.html#a041d1a2b52759640cbea24d0d5e99ff6">md5</a>[MD5_DIGEST_SIZE];         <span class="comment">// File MD5 from the (attributes) file. 0 if not present.</span>
<a name="l00728"></a><a class="code" href="struct___t_file_entry.html#aa00a675cf553d128b1e3b5fdd9cdca0e">00728</a>     <span class="keywordtype">char</span> * <a class="code" href="struct___t_file_entry.html#aa00a675cf553d128b1e3b5fdd9cdca0e">szFileName</a>;                          <span class="comment">// File name. NULL if not known.</span>
<a name="l00729"></a>00729 } <a class="code" href="_storm_lib_8h.html#a6755f8a9dd10fc735930a54e50717e49">TFileEntry</a>;
<a name="l00730"></a>00730 
<a name="l00731"></a>00731 <span class="comment">// Common header for HET and BET tables</span>
<a name="l00732"></a><a class="code" href="struct___t_m_p_q_ext_header.html">00732</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_ext_header.html">_TMPQExtHeader</a>
<a name="l00733"></a>00733 {
<a name="l00734"></a><a class="code" href="struct___t_m_p_q_ext_header.html#a1ba930aaf941619d6e7fea914d42c680">00734</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_ext_header.html#a1ba930aaf941619d6e7fea914d42c680">dwSignature</a>;                          <span class="comment">// &#39;HET\x1A&#39; or &#39;BET\x1A&#39;</span>
<a name="l00735"></a><a class="code" href="struct___t_m_p_q_ext_header.html#a4a08afaf17aa96f9902f9c1d57d585de">00735</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_ext_header.html#a4a08afaf17aa96f9902f9c1d57d585de">dwVersion</a>;                            <span class="comment">// Version. Seems to be always 1</span>
<a name="l00736"></a><a class="code" href="struct___t_m_p_q_ext_header.html#ab9eb2f6f05fc9177061a7a89e1eed4c5">00736</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_ext_header.html#ab9eb2f6f05fc9177061a7a89e1eed4c5">dwDataSize</a>;                           <span class="comment">// Size of the contained table</span>
<a name="l00737"></a>00737 
<a name="l00738"></a>00738     <span class="comment">// Followed by the table header</span>
<a name="l00739"></a>00739     <span class="comment">// Followed by the table data</span>
<a name="l00740"></a>00740 
<a name="l00741"></a>00741 } <a class="code" href="_storm_lib_8h.html#acc9878fcc6db211ca936c60041e5829a">TMPQExtHeader</a>;
<a name="l00742"></a>00742 
<a name="l00743"></a>00743 <span class="comment">// Structure for HET table header</span>
<a name="l00744"></a><a class="code" href="struct___t_m_p_q_het_header.html">00744</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_het_header.html">_TMPQHetHeader</a>
<a name="l00745"></a>00745 {
<a name="l00746"></a><a class="code" href="struct___t_m_p_q_het_header.html#a90acf1785cd6e6712eb966faaad03b66">00746</a>     <a class="code" href="struct___t_m_p_q_ext_header.html">TMPQExtHeader</a> <a class="code" href="struct___t_m_p_q_het_header.html#a90acf1785cd6e6712eb966faaad03b66">ExtHdr</a>;
<a name="l00747"></a>00747 
<a name="l00748"></a><a class="code" href="struct___t_m_p_q_het_header.html#a22b15b95d8d8e4a9a1f5aa9316a7a208">00748</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#a22b15b95d8d8e4a9a1f5aa9316a7a208">dwTableSize</a>;                      <span class="comment">// Size of the entire HET table, including HET_TABLE_HEADER (in bytes)</span>
<a name="l00749"></a><a class="code" href="struct___t_m_p_q_het_header.html#a4b2b4a294b28b2792bee351a92581240">00749</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#a4b2b4a294b28b2792bee351a92581240">dwEntryCount</a>;                     <span class="comment">// Number of occupied entries in the HET table</span>
<a name="l00750"></a><a class="code" href="struct___t_m_p_q_het_header.html#ac4fff37e7f0d034afa7d0b62efae97ad">00750</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#ac4fff37e7f0d034afa7d0b62efae97ad">dwTotalCount</a>;                     <span class="comment">// Total number of entries in the HET table</span>
<a name="l00751"></a><a class="code" href="struct___t_m_p_q_het_header.html#abb7873980191b9efa3df3800b1da9598">00751</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#abb7873980191b9efa3df3800b1da9598">dwNameHashBitSize</a>;                <span class="comment">// Size of the name hash entry (in bits)</span>
<a name="l00752"></a><a class="code" href="struct___t_m_p_q_het_header.html#a43f32164cb9ff78490e212b2dfc1ffe5">00752</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#a43f32164cb9ff78490e212b2dfc1ffe5">dwIndexSizeTotal</a>;                 <span class="comment">// Total size of file index (in bits)</span>
<a name="l00753"></a><a class="code" href="struct___t_m_p_q_het_header.html#a31b9f42a1884d9d0116f827d2ebdff3a">00753</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#a31b9f42a1884d9d0116f827d2ebdff3a">dwIndexSizeExtra</a>;                 <span class="comment">// Extra bits in the file index</span>
<a name="l00754"></a><a class="code" href="struct___t_m_p_q_het_header.html#af7ac693981d260a8d68702e945d9561e">00754</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#af7ac693981d260a8d68702e945d9561e">dwIndexSize</a>;                      <span class="comment">// Effective size of the file index (in bits)</span>
<a name="l00755"></a><a class="code" href="struct___t_m_p_q_het_header.html#a33f17be1cef184a7281b4d7473d64449">00755</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_het_header.html#a33f17be1cef184a7281b4d7473d64449">dwIndexTableSize</a>;                 <span class="comment">// Size of the block index subtable (in bytes)</span>
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 } <a class="code" href="_storm_lib_8h.html#a28374e6e1ad66aaeeb56079264640223">TMPQHetHeader</a>;
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 <span class="comment">// Structure for BET table header</span>
<a name="l00760"></a><a class="code" href="struct___t_m_p_q_bet_header.html">00760</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_bet_header.html">_TMPQBetHeader</a>
<a name="l00761"></a>00761 {
<a name="l00762"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a6553e272cc50294e5a2c3d28a11d8f7d">00762</a>     <a class="code" href="struct___t_m_p_q_ext_header.html">TMPQExtHeader</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a6553e272cc50294e5a2c3d28a11d8f7d">ExtHdr</a>;
<a name="l00763"></a>00763 
<a name="l00764"></a><a class="code" href="struct___t_m_p_q_bet_header.html#ae43cc1bb24c43f2827644d1802667b5d">00764</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#ae43cc1bb24c43f2827644d1802667b5d">dwTableSize</a>;                      <span class="comment">// Size of the entire BET table, including the header (in bytes)</span>
<a name="l00765"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a41c718e0dd2c3301ac16438f87c47ed3">00765</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a41c718e0dd2c3301ac16438f87c47ed3">dwEntryCount</a>;                     <span class="comment">// Number of entries in the BET table. Must match HET_TABLE_HEADER::dwEntryCount</span>
<a name="l00766"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a9fe0d26ac67b3dc0d012b10063bec6ba">00766</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a9fe0d26ac67b3dc0d012b10063bec6ba">dwUnknown08</a>;
<a name="l00767"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a959598371e5300f0d6720e5a5d6162b1">00767</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a959598371e5300f0d6720e5a5d6162b1">dwTableEntrySize</a>;                 <span class="comment">// Size of one table entry (in bits)</span>
<a name="l00768"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a1472dc6aba761ab36bc22eafa555e2fb">00768</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a1472dc6aba761ab36bc22eafa555e2fb">dwBitIndex_FilePos</a>;               <span class="comment">// Bit index of the file position (within the entry record)</span>
<a name="l00769"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a0ab3bd38b9b5d5e134b72aa65952b03d">00769</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a0ab3bd38b9b5d5e134b72aa65952b03d">dwBitIndex_FileSize</a>;              <span class="comment">// Bit index of the file size (within the entry record)</span>
<a name="l00770"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a878139d8289bee10e485c678599e3bf7">00770</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a878139d8289bee10e485c678599e3bf7">dwBitIndex_CmpSize</a>;               <span class="comment">// Bit index of the compressed size (within the entry record)</span>
<a name="l00771"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a56acf59fff9d287a1e46ed8faaa20e5e">00771</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a56acf59fff9d287a1e46ed8faaa20e5e">dwBitIndex_FlagIndex</a>;             <span class="comment">// Bit index of the flag index (within the entry record)</span>
<a name="l00772"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a2133dda67e0c52a1f38310b6b2f0320b">00772</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a2133dda67e0c52a1f38310b6b2f0320b">dwBitIndex_Unknown</a>;               <span class="comment">// Bit index of the ??? (within the entry record)</span>
<a name="l00773"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a7efe69205250b2ca05a315600bc934b7">00773</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a7efe69205250b2ca05a315600bc934b7">dwBitCount_FilePos</a>;               <span class="comment">// Bit size of file position (in the entry record)</span>
<a name="l00774"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a479473ff6857586c8476fe2924ea0f42">00774</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a479473ff6857586c8476fe2924ea0f42">dwBitCount_FileSize</a>;              <span class="comment">// Bit size of file size (in the entry record)</span>
<a name="l00775"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a1aafb4eb559ea6a9c554b618e40977a0">00775</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a1aafb4eb559ea6a9c554b618e40977a0">dwBitCount_CmpSize</a>;               <span class="comment">// Bit size of compressed file size (in the entry record)</span>
<a name="l00776"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a2682616c3545c6f8065eb6d8b03fa19d">00776</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a2682616c3545c6f8065eb6d8b03fa19d">dwBitCount_FlagIndex</a>;             <span class="comment">// Bit size of flags index (in the entry record)</span>
<a name="l00777"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a564af4977dac0c03a44b99fe622ce25d">00777</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a564af4977dac0c03a44b99fe622ce25d">dwBitCount_Unknown</a>;               <span class="comment">// Bit size of ??? (in the entry record)</span>
<a name="l00778"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a3f2fc842f62b63f5373d6fc792911ae5">00778</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a3f2fc842f62b63f5373d6fc792911ae5">dwBitTotal_NameHash2</a>;             <span class="comment">// Total bit size of the NameHash2</span>
<a name="l00779"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a7aa87ddb5653b9a5522a2ef1a77f548b">00779</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a7aa87ddb5653b9a5522a2ef1a77f548b">dwBitExtra_NameHash2</a>;             <span class="comment">// Extra bits in the NameHash2</span>
<a name="l00780"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a8a40f51a8979f1da34088bab7a1188ef">00780</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a8a40f51a8979f1da34088bab7a1188ef">dwBitCount_NameHash2</a>;             <span class="comment">// Effective size of NameHash2 (in bits)</span>
<a name="l00781"></a><a class="code" href="struct___t_m_p_q_bet_header.html#aa85e220f76f26f1f407ceb5dda854929">00781</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#aa85e220f76f26f1f407ceb5dda854929">dwNameHashArraySize</a>;              <span class="comment">// Size of NameHash2 table, in bytes</span>
<a name="l00782"></a><a class="code" href="struct___t_m_p_q_bet_header.html#a84be7e0ef64caf29adebdbb0f1a484b9">00782</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_header.html#a84be7e0ef64caf29adebdbb0f1a484b9">dwFlagCount</a>;                      <span class="comment">// Number of flags in the following array</span>
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 } <a class="code" href="_storm_lib_8h.html#a64e6ece5ffecc5eda1124359eb014f77">TMPQBetHeader</a>;
<a name="l00785"></a>00785 
<a name="l00786"></a>00786 <span class="comment">// Structure for parsed HET table</span>
<a name="l00787"></a><a class="code" href="struct___t_m_p_q_het_table.html">00787</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_het_table.html">_TMPQHetTable</a>
<a name="l00788"></a>00788 {
<a name="l00789"></a><a class="code" href="struct___t_m_p_q_het_table.html#aea3549dcfd9b7606125f32f0af8ca5ff">00789</a>     <a class="code" href="struct___t_bit_array.html">TBitArray</a> * <a class="code" href="struct___t_m_p_q_het_table.html#aea3549dcfd9b7606125f32f0af8ca5ff">pBetIndexes</a>;                    <span class="comment">// Bit array of FileIndex values</span>
<a name="l00790"></a><a class="code" href="struct___t_m_p_q_het_table.html#ae932645bfbeb008ccaa9d2523d352ec4">00790</a>     <a class="code" href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a>     <a class="code" href="struct___t_m_p_q_het_table.html#ae932645bfbeb008ccaa9d2523d352ec4">pNameHashes</a>;                     <span class="comment">// Array of NameHash1 values (NameHash1 = upper 8 bits of FileName hashe)</span>
<a name="l00791"></a><a class="code" href="struct___t_m_p_q_het_table.html#acb0d375cf300a908b7f68ae7273686eb">00791</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>  <a class="code" href="struct___t_m_p_q_het_table.html#acb0d375cf300a908b7f68ae7273686eb">AndMask64</a>;                       <span class="comment">// AND mask used for calculating file name hash</span>
<a name="l00792"></a><a class="code" href="struct___t_m_p_q_het_table.html#a576fe2014aa1728d97a4cb2ccc6fae92">00792</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>  <a class="code" href="struct___t_m_p_q_het_table.html#a576fe2014aa1728d97a4cb2ccc6fae92">OrMask64</a>;                        <span class="comment">// OR mask used for setting the highest bit of the file name hash</span>
<a name="l00793"></a>00793 
<a name="l00794"></a><a class="code" href="struct___t_m_p_q_het_table.html#a2665ff9c158bcc7c40283f543f25d0ef">00794</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>      <a class="code" href="struct___t_m_p_q_het_table.html#a2665ff9c158bcc7c40283f543f25d0ef">dwEntryCount</a>;                    <span class="comment">// Number of occupied entries in the HET table</span>
<a name="l00795"></a><a class="code" href="struct___t_m_p_q_het_table.html#a1a41b8ec2d6869cbe7971d8400f29e42">00795</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>      <a class="code" href="struct___t_m_p_q_het_table.html#a1a41b8ec2d6869cbe7971d8400f29e42">dwTotalCount</a>;                    <span class="comment">// Number of entries in both NameHash and FileIndex table</span>
<a name="l00796"></a><a class="code" href="struct___t_m_p_q_het_table.html#a187695205d5281f1213239379dd34017">00796</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>      <a class="code" href="struct___t_m_p_q_het_table.html#a187695205d5281f1213239379dd34017">dwNameHashBitSize</a>;               <span class="comment">// Size of the name hash entry (in bits)</span>
<a name="l00797"></a><a class="code" href="struct___t_m_p_q_het_table.html#ae6ce8986147611bceb9119ba1c5244e0">00797</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>      <a class="code" href="struct___t_m_p_q_het_table.html#ae6ce8986147611bceb9119ba1c5244e0">dwIndexSizeTotal</a>;                <span class="comment">// Total size of one entry in pBetIndexes (in bits)</span>
<a name="l00798"></a><a class="code" href="struct___t_m_p_q_het_table.html#a301d2237de2b14edd6d62f7251e8c5a1">00798</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>      <a class="code" href="struct___t_m_p_q_het_table.html#a301d2237de2b14edd6d62f7251e8c5a1">dwIndexSizeExtra</a>;                <span class="comment">// Extra bits in the entry in pBetIndexes</span>
<a name="l00799"></a><a class="code" href="struct___t_m_p_q_het_table.html#a31710d22bc6664b9ac1d24ef7568dff3">00799</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>      <a class="code" href="struct___t_m_p_q_het_table.html#a31710d22bc6664b9ac1d24ef7568dff3">dwIndexSize</a>;                     <span class="comment">// Effective size of one entry in pBetIndexes (in bits)</span>
<a name="l00800"></a>00800 } <a class="code" href="_storm_lib_8h.html#ac9f713e738d9d0201609d33eb0654c04">TMPQHetTable</a>;
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 <span class="comment">// Structure for parsed BET table</span>
<a name="l00803"></a><a class="code" href="struct___t_m_p_q_bet_table.html">00803</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_bet_table.html">_TMPQBetTable</a>
<a name="l00804"></a>00804 {
<a name="l00805"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a201518fed6124396d33f14ab9f2e6956">00805</a>     <a class="code" href="struct___t_bit_array.html">TBitArray</a> * <a class="code" href="struct___t_m_p_q_bet_table.html#a201518fed6124396d33f14ab9f2e6956">pNameHashes</a>;                    <span class="comment">// Array of NameHash2 entries (lower 24 bits of FileName hash)</span>
<a name="l00806"></a><a class="code" href="struct___t_m_p_q_bet_table.html#adb64f85e8d93c855f4f3b981769f66c1">00806</a>     <a class="code" href="struct___t_bit_array.html">TBitArray</a> * <a class="code" href="struct___t_m_p_q_bet_table.html#adb64f85e8d93c855f4f3b981769f66c1">pFileTable</a>;                     <span class="comment">// Bit-based file table</span>
<a name="l00807"></a><a class="code" href="struct___t_m_p_q_bet_table.html#ad1b572faf10140931aaccd7871c5b2a3">00807</a>     <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#ad1b572faf10140931aaccd7871c5b2a3">pFileFlags</a>;                         <span class="comment">// Array of file flags</span>
<a name="l00808"></a>00808 
<a name="l00809"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a88f9182086767fcdd5ae3926f4034005">00809</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a88f9182086767fcdd5ae3926f4034005">dwTableEntrySize</a>;                     <span class="comment">// Size of one table entry, in bits</span>
<a name="l00810"></a><a class="code" href="struct___t_m_p_q_bet_table.html#aacc4ba36bd2ca4224a94eb7dee860ab9">00810</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#aacc4ba36bd2ca4224a94eb7dee860ab9">dwBitIndex_FilePos</a>;                   <span class="comment">// Bit index of the file position in the table entry</span>
<a name="l00811"></a><a class="code" href="struct___t_m_p_q_bet_table.html#ad48286a9615f15ed471a253c94e2d312">00811</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#ad48286a9615f15ed471a253c94e2d312">dwBitIndex_FileSize</a>;                  <span class="comment">// Bit index of the file size in the table entry</span>
<a name="l00812"></a><a class="code" href="struct___t_m_p_q_bet_table.html#acc49c58de74d42be5043e5ddcbad24a7">00812</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#acc49c58de74d42be5043e5ddcbad24a7">dwBitIndex_CmpSize</a>;                   <span class="comment">// Bit index of the compressed size in the table entry</span>
<a name="l00813"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a09b52e501e2c30419d7555e10981c0f3">00813</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a09b52e501e2c30419d7555e10981c0f3">dwBitIndex_FlagIndex</a>;                 <span class="comment">// Bit index of the flag index in the table entry</span>
<a name="l00814"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a4e304351219cbc19f9116994d3f6e076">00814</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a4e304351219cbc19f9116994d3f6e076">dwBitIndex_Unknown</a>;                   <span class="comment">// Bit index of ??? in the table entry</span>
<a name="l00815"></a><a class="code" href="struct___t_m_p_q_bet_table.html#ac8c14b6ef6e32aff186e417091735634">00815</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#ac8c14b6ef6e32aff186e417091735634">dwBitCount_FilePos</a>;                   <span class="comment">// Size of file offset (in bits) within table entry</span>
<a name="l00816"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a94ddd806b5eaf4473d8b4cd36f2f06da">00816</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a94ddd806b5eaf4473d8b4cd36f2f06da">dwBitCount_FileSize</a>;                  <span class="comment">// Size of file size (in bits) within table entry</span>
<a name="l00817"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a5d2fabd3f7d394831d3ea346ac459b10">00817</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a5d2fabd3f7d394831d3ea346ac459b10">dwBitCount_CmpSize</a>;                   <span class="comment">// Size of compressed file size (in bits) within table entry</span>
<a name="l00818"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a6e3f96f932ff9f63f01806fcabfcdd84">00818</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a6e3f96f932ff9f63f01806fcabfcdd84">dwBitCount_FlagIndex</a>;                 <span class="comment">// Size of flag index (in bits) within table entry</span>
<a name="l00819"></a><a class="code" href="struct___t_m_p_q_bet_table.html#aefd753201b79225c4010bf2c65b9248c">00819</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#aefd753201b79225c4010bf2c65b9248c">dwBitCount_Unknown</a>;                   <span class="comment">// Size of ??? (in bits) within table entry</span>
<a name="l00820"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a577b3d75ba0d567ec8f9cd494469eafb">00820</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a577b3d75ba0d567ec8f9cd494469eafb">dwBitTotal_NameHash2</a>;                 <span class="comment">// Total size of the NameHash2</span>
<a name="l00821"></a><a class="code" href="struct___t_m_p_q_bet_table.html#af2869eabbac4663a209bc5769be145aa">00821</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#af2869eabbac4663a209bc5769be145aa">dwBitExtra_NameHash2</a>;                 <span class="comment">// Extra bits in the NameHash2</span>
<a name="l00822"></a><a class="code" href="struct___t_m_p_q_bet_table.html#af5375d55ffabe40391a6376515205c03">00822</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#af5375d55ffabe40391a6376515205c03">dwBitCount_NameHash2</a>;                 <span class="comment">// Effective size of the NameHash2</span>
<a name="l00823"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a66a80bba649704c56659f38ba249ec6c">00823</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a66a80bba649704c56659f38ba249ec6c">dwEntryCount</a>;                         <span class="comment">// Number of entries</span>
<a name="l00824"></a><a class="code" href="struct___t_m_p_q_bet_table.html#a4673f19f0bb126847be370849743b7f1">00824</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_m_p_q_bet_table.html#a4673f19f0bb126847be370849743b7f1">dwFlagCount</a>;                          <span class="comment">// Number of fil flags in pFileFlags</span>
<a name="l00825"></a>00825 } <a class="code" href="_storm_lib_8h.html#ac11b2877619e17a6794e1289679d91bf">TMPQBetTable</a>;
<a name="l00826"></a>00826 
<a name="l00827"></a>00827 <span class="comment">// Archive handle structure</span>
<a name="l00828"></a><a class="code" href="struct___t_m_p_q_archive.html">00828</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_archive.html">_TMPQArchive</a>
<a name="l00829"></a>00829 {
<a name="l00830"></a><a class="code" href="struct___t_m_p_q_archive.html#a3dac14b565b2d617f5f3e65db2d7fa05">00830</a>     <a class="code" href="struct_t_file_stream.html">TFileStream</a>  * <a class="code" href="struct___t_m_p_q_archive.html#a3dac14b565b2d617f5f3e65db2d7fa05">pStream</a>;                     <span class="comment">// Open stream for the MPQ</span>
<a name="l00831"></a>00831 
<a name="l00832"></a><a class="code" href="struct___t_m_p_q_archive.html#a43334c6a178fc02023a7412d9319136c">00832</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>      <a class="code" href="struct___t_m_p_q_archive.html#a43334c6a178fc02023a7412d9319136c">UserDataPos</a>;                 <span class="comment">// Position of user data (relative to the begin of the file)</span>
<a name="l00833"></a><a class="code" href="struct___t_m_p_q_archive.html#a146dee965bc1cb34e569e3637b6e5c82">00833</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>      <a class="code" href="struct___t_m_p_q_archive.html#a146dee965bc1cb34e569e3637b6e5c82">MpqPos</a>;                      <span class="comment">// MPQ header offset (relative to the begin of the file)</span>
<a name="l00834"></a>00834 
<a name="l00835"></a><a class="code" href="struct___t_m_p_q_archive.html#aa2646402b5718a74c1908745ea6a46cd">00835</a>     <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_archive.html">_TMPQArchive</a> * <a class="code" href="struct___t_m_p_q_archive.html#aa2646402b5718a74c1908745ea6a46cd">haPatch</a>;              <span class="comment">// Pointer to patch archive, if any</span>
<a name="l00836"></a><a class="code" href="struct___t_m_p_q_archive.html#a6e455bdb9e81a614ed10d954ee846293">00836</a>     <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_archive.html">_TMPQArchive</a> * <a class="code" href="struct___t_m_p_q_archive.html#a6e455bdb9e81a614ed10d954ee846293">haBase</a>;               <span class="comment">// Pointer to base (&quot;previous version&quot;) archive, if any</span>
<a name="l00837"></a><a class="code" href="struct___t_m_p_q_archive.html#a4c0341f82fd0d7e951a42a72e160ceb1">00837</a>     <span class="keywordtype">char</span> <a class="code" href="struct___t_m_p_q_archive.html#a4c0341f82fd0d7e951a42a72e160ceb1">szPatchPrefix</a>[<a class="code" href="_storm_lib_8h.html#a177ebe55e6d0ad4775ab4b8c1cfdb95a">MPQ_PATCH_PREFIX_LEN</a>];   <span class="comment">// Prefix for file names in patch MPQs</span>
<a name="l00838"></a><a class="code" href="struct___t_m_p_q_archive.html#a19fa1c3a6ba639cbd73d83273bb4694a">00838</a>     <span class="keywordtype">size_t</span>         <a class="code" href="struct___t_m_p_q_archive.html#a19fa1c3a6ba639cbd73d83273bb4694a">cchPatchPrefix</a>;              <span class="comment">// Length of the patch prefix, in characters</span>
<a name="l00839"></a>00839 
<a name="l00840"></a><a class="code" href="struct___t_m_p_q_archive.html#a7583a5113bdd4a857a71bbd92c86eb6e">00840</a>     <a class="code" href="struct___t_m_p_q_user_data.html">TMPQUserData</a> * <a class="code" href="struct___t_m_p_q_archive.html#a7583a5113bdd4a857a71bbd92c86eb6e">pUserData</a>;                   <span class="comment">// MPQ user data (NULL if not present in the file)</span>
<a name="l00841"></a><a class="code" href="struct___t_m_p_q_archive.html#afb1795fbecd5336fe21770ed1f76a33f">00841</a>     <a class="code" href="struct___t_m_p_q_header.html">TMPQHeader</a>   * <a class="code" href="struct___t_m_p_q_archive.html#afb1795fbecd5336fe21770ed1f76a33f">pHeader</a>;                     <span class="comment">// MPQ file header</span>
<a name="l00842"></a><a class="code" href="struct___t_m_p_q_archive.html#ad3ec9127fcae2cd440073adbc3f21fba">00842</a>     <a class="code" href="struct___t_m_p_q_hash.html">TMPQHash</a>     * <a class="code" href="struct___t_m_p_q_archive.html#ad3ec9127fcae2cd440073adbc3f21fba">pHashTable</a>;                  <span class="comment">// Hash table</span>
<a name="l00843"></a><a class="code" href="struct___t_m_p_q_archive.html#a964afcb85acb567a58ef4066b579fd51">00843</a>     <a class="code" href="struct___t_m_p_q_het_table.html">TMPQHetTable</a> * <a class="code" href="struct___t_m_p_q_archive.html#a964afcb85acb567a58ef4066b579fd51">pHetTable</a>;                   <span class="comment">// HET table</span>
<a name="l00844"></a><a class="code" href="struct___t_m_p_q_archive.html#a82a7283606d9775df50cb1c683280db1">00844</a>     <a class="code" href="struct___t_file_entry.html">TFileEntry</a>   * <a class="code" href="struct___t_m_p_q_archive.html#a82a7283606d9775df50cb1c683280db1">pFileTable</a>;                  <span class="comment">// File table</span>
<a name="l00845"></a><a class="code" href="struct___t_m_p_q_archive.html#a5075170ac14f68563fd5548ad332fe38">00845</a>     <a class="code" href="_storm_lib_8h.html#a144bc2a1bbec5b42be403e3bdb16d013">HASH_STRING</a>    <a class="code" href="struct___t_m_p_q_archive.html#a5075170ac14f68563fd5548ad332fe38">pfnHashString</a>;               <span class="comment">// Hashing function that will convert the file name into hash</span>
<a name="l00846"></a>00846     
<a name="l00847"></a><a class="code" href="struct___t_m_p_q_archive.html#adc3931555ea4e7dd2b1e4858eee48c0a">00847</a>     <a class="code" href="struct___t_m_p_q_user_data.html">TMPQUserData</a>   <a class="code" href="struct___t_m_p_q_archive.html#adc3931555ea4e7dd2b1e4858eee48c0a">UserData</a>;                    <span class="comment">// MPQ user data. Valid only when ID_MPQ_USERDATA has been found</span>
<a name="l00848"></a><a class="code" href="struct___t_m_p_q_archive.html#a515bd4fb99f5bacb557725b71c3ee3b2">00848</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#a515bd4fb99f5bacb557725b71c3ee3b2">HeaderData</a>[<a class="code" href="_storm_lib_8h.html#af15a614080a5231006e0381b3c715760">MPQ_HEADER_DWORDS</a>];  <span class="comment">// Storage for MPQ header</span>
<a name="l00849"></a>00849 
<a name="l00850"></a><a class="code" href="struct___t_m_p_q_archive.html#a870f83350a4a4fa805ee3858ea4bd7f5">00850</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#a870f83350a4a4fa805ee3858ea4bd7f5">dwHETBlockSize</a>;
<a name="l00851"></a><a class="code" href="struct___t_m_p_q_archive.html#a7416d94c8570654cf371c4f265735a57">00851</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#a7416d94c8570654cf371c4f265735a57">dwBETBlockSize</a>;
<a name="l00852"></a><a class="code" href="struct___t_m_p_q_archive.html#aefc10ddd33bc3158c683cba1eab71c38">00852</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#aefc10ddd33bc3158c683cba1eab71c38">dwMaxFileCount</a>;              <span class="comment">// Maximum number of files in the MPQ. Also total size of the file table.</span>
<a name="l00853"></a><a class="code" href="struct___t_m_p_q_archive.html#aae2b6f26cfc5d09d2fc734947c82aabe">00853</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#aae2b6f26cfc5d09d2fc734947c82aabe">dwFileTableSize</a>;             <span class="comment">// Current size of the file table, e.g. index of the entry past the last occupied one</span>
<a name="l00854"></a><a class="code" href="struct___t_m_p_q_archive.html#a9eae90efbf3e52b5bb0b400eb157547e">00854</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#a9eae90efbf3e52b5bb0b400eb157547e">dwReservedFiles</a>;             <span class="comment">// Number of entries reserved for internal MPQ files (listfile, attributes)</span>
<a name="l00855"></a><a class="code" href="struct___t_m_p_q_archive.html#a3f3661fec3d00a1e93ba3c2212a2e703">00855</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#a3f3661fec3d00a1e93ba3c2212a2e703">dwSectorSize</a>;                <span class="comment">// Default size of one file sector</span>
<a name="l00856"></a><a class="code" href="struct___t_m_p_q_archive.html#af277e7bdab70f04a3019a18ef37a701a">00856</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#af277e7bdab70f04a3019a18ef37a701a">dwFileFlags1</a>;                <span class="comment">// Flags for (listfile)</span>
<a name="l00857"></a><a class="code" href="struct___t_m_p_q_archive.html#ae2a681db2717763a2908943706839a61">00857</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#ae2a681db2717763a2908943706839a61">dwFileFlags2</a>;                <span class="comment">// Flags for (attributes)</span>
<a name="l00858"></a><a class="code" href="struct___t_m_p_q_archive.html#ad2519a9b6b0657a19176bbe5d2e5651e">00858</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#ad2519a9b6b0657a19176bbe5d2e5651e">dwAttrFlags</a>;                 <span class="comment">// Flags for the (attributes) file, see MPQ_ATTRIBUTE_XXX</span>
<a name="l00859"></a><a class="code" href="struct___t_m_p_q_archive.html#a4f1bf356f8e6dd8d3ec1faeec821aa6c">00859</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#a4f1bf356f8e6dd8d3ec1faeec821aa6c">dwFlags</a>;                     <span class="comment">// See MPQ_FLAG_XXXXX</span>
<a name="l00860"></a><a class="code" href="struct___t_m_p_q_archive.html#adfa7731ad54c7b934ed2e8f590b41958">00860</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_archive.html#adfa7731ad54c7b934ed2e8f590b41958">dwSubType</a>;                   <span class="comment">// See MPQ_SUBTYPE_XXX</span>
<a name="l00861"></a>00861 
<a name="l00862"></a><a class="code" href="struct___t_m_p_q_archive.html#ae614bf73548639003f8243f437ba9624">00862</a>     <a class="code" href="_storm_lib_8h.html#aa079b6d9f0e997a0b4dff53ad112f603">SFILE_ADDFILE_CALLBACK</a> <a class="code" href="struct___t_m_p_q_archive.html#ae614bf73548639003f8243f437ba9624">pfnAddFileCB</a>;        <span class="comment">// Callback function for adding files</span>
<a name="l00863"></a><a class="code" href="struct___t_m_p_q_archive.html#a1bb84be2781abcca46fd31c542260430">00863</a>     <span class="keywordtype">void</span>         * <a class="code" href="struct___t_m_p_q_archive.html#a1bb84be2781abcca46fd31c542260430">pvAddFileUserData</a>;           <span class="comment">// User data thats passed to the callback</span>
<a name="l00864"></a>00864 
<a name="l00865"></a><a class="code" href="struct___t_m_p_q_archive.html#a77480124f58b4f0314768510471cf62d">00865</a>     <a class="code" href="_storm_lib_8h.html#a2a42639b325f48193ab2b5e0ef4b2800">SFILE_COMPACT_CALLBACK</a> <a class="code" href="struct___t_m_p_q_archive.html#a77480124f58b4f0314768510471cf62d">pfnCompactCB</a>;        <span class="comment">// Callback function for compacting the archive</span>
<a name="l00866"></a><a class="code" href="struct___t_m_p_q_archive.html#a36bdadf2b67eb194aa5c7ef1399e02b8">00866</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>      <a class="code" href="struct___t_m_p_q_archive.html#a36bdadf2b67eb194aa5c7ef1399e02b8">CompactBytesProcessed</a>;       <span class="comment">// Amount of bytes that have been processed during a particular compact call</span>
<a name="l00867"></a><a class="code" href="struct___t_m_p_q_archive.html#a00401a81d010165ab945fcf29a1d686e">00867</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>      <a class="code" href="struct___t_m_p_q_archive.html#a00401a81d010165ab945fcf29a1d686e">CompactTotalBytes</a>;           <span class="comment">// Total amount of bytes to be compacted</span>
<a name="l00868"></a><a class="code" href="struct___t_m_p_q_archive.html#aa67fc1ad0359ad11f58c31187100a4f7">00868</a>     <span class="keywordtype">void</span>         * <a class="code" href="struct___t_m_p_q_archive.html#aa67fc1ad0359ad11f58c31187100a4f7">pvCompactUserData</a>;           <span class="comment">// User data thats passed to the callback</span>
<a name="l00869"></a>00869 } <a class="code" href="_storm_lib_8h.html#a4fd537a0b2415a954a1fd5b561a4b323">TMPQArchive</a>;                                      
<a name="l00870"></a>00870 
<a name="l00871"></a>00871 <span class="comment">// File handle structure</span>
<a name="l00872"></a><a class="code" href="struct___t_m_p_q_file.html">00872</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_file.html">_TMPQFile</a>
<a name="l00873"></a>00873 {
<a name="l00874"></a><a class="code" href="struct___t_m_p_q_file.html#a8c3a90e5d6abcbc6757bf7fdae94a5d9">00874</a>     <a class="code" href="struct_t_file_stream.html">TFileStream</a>  * <a class="code" href="struct___t_m_p_q_file.html#a8c3a90e5d6abcbc6757bf7fdae94a5d9">pStream</a>;                     <span class="comment">// File stream. Only used on local files</span>
<a name="l00875"></a><a class="code" href="struct___t_m_p_q_file.html#a3d3e5acf9eea51e01ee22aa9c64d75a8">00875</a>     <a class="code" href="struct___t_m_p_q_archive.html">TMPQArchive</a>  * <a class="code" href="struct___t_m_p_q_file.html#a3d3e5acf9eea51e01ee22aa9c64d75a8">ha</a>;                          <span class="comment">// Archive handle</span>
<a name="l00876"></a><a class="code" href="struct___t_m_p_q_file.html#a1eeeacf708887722dd9c0114c06121dc">00876</a>     <a class="code" href="struct___t_file_entry.html">TFileEntry</a>   * <a class="code" href="struct___t_m_p_q_file.html#a1eeeacf708887722dd9c0114c06121dc">pFileEntry</a>;                  <span class="comment">// File entry for the file</span>
<a name="l00877"></a><a class="code" href="struct___t_m_p_q_file.html#a8ab42b6a429f382c93bb79b413541ab6">00877</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#a8ab42b6a429f382c93bb79b413541ab6">dwFileKey</a>;                   <span class="comment">// Decryption key</span>
<a name="l00878"></a><a class="code" href="struct___t_m_p_q_file.html#acc7d222ba9bf68719f415e433dc8694c">00878</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#acc7d222ba9bf68719f415e433dc8694c">dwFilePos</a>;                   <span class="comment">// Current file position</span>
<a name="l00879"></a><a class="code" href="struct___t_m_p_q_file.html#a4d5c4f69a005314e25206e1d4db79092">00879</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>      <a class="code" href="struct___t_m_p_q_file.html#a4d5c4f69a005314e25206e1d4db79092">RawFilePos</a>;                  <span class="comment">// Offset in MPQ archive (relative to file begin)</span>
<a name="l00880"></a><a class="code" href="struct___t_m_p_q_file.html#aa3f1dd4380ab784cf651b5191573cc26">00880</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a>      <a class="code" href="struct___t_m_p_q_file.html#aa3f1dd4380ab784cf651b5191573cc26">MpqFilePos</a>;                  <span class="comment">// Offset in MPQ archive (relative to MPQ header)</span>
<a name="l00881"></a><a class="code" href="struct___t_m_p_q_file.html#a9956b4f56e1632d344d412cb9ce0b73d">00881</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#a9956b4f56e1632d344d412cb9ce0b73d">dwMagic</a>;                     <span class="comment">// &#39;FILE&#39;</span>
<a name="l00882"></a>00882 
<a name="l00883"></a><a class="code" href="struct___t_m_p_q_file.html#add8833bffe289c96c79f641789a9743b">00883</a>     <span class="keyword">struct </span><a class="code" href="struct___t_m_p_q_file.html">_TMPQFile</a> * <a class="code" href="struct___t_m_p_q_file.html#add8833bffe289c96c79f641789a9743b">hfPatch</a>;                 <span class="comment">// Pointer to opened patch file</span>
<a name="l00884"></a><a class="code" href="struct___t_m_p_q_file.html#afe6dc081c76c0416687f48d0ee192748">00884</a>     <a class="code" href="struct___t_patch_header.html">TPatchHeader</a> * <a class="code" href="struct___t_m_p_q_file.html#afe6dc081c76c0416687f48d0ee192748">pPatchHeader</a>;                <span class="comment">// Patch header. Only used if the file is a patch file</span>
<a name="l00885"></a><a class="code" href="struct___t_m_p_q_file.html#a89a99d0fe6fa09e6749f6770db52077c">00885</a>     <a class="code" href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a>         <a class="code" href="struct___t_m_p_q_file.html#a89a99d0fe6fa09e6749f6770db52077c">pbFileData</a>;                  <span class="comment">// Loaded and patched file data. Only used if the file is a patch file</span>
<a name="l00886"></a><a class="code" href="struct___t_m_p_q_file.html#a78857e841d77f560e3a25360fb8967d8">00886</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#a78857e841d77f560e3a25360fb8967d8">cbFileData</a>;                  <span class="comment">// Size of loaded patched data</span>
<a name="l00887"></a>00887 
<a name="l00888"></a><a class="code" href="struct___t_m_p_q_file.html#a1aa2c25c7ff34803ce1c5086fe3422a3">00888</a>     <a class="code" href="struct___t_patch_info.html">TPatchInfo</a>   * <a class="code" href="struct___t_m_p_q_file.html#a1aa2c25c7ff34803ce1c5086fe3422a3">pPatchInfo</a>;                  <span class="comment">// Patch info block, preceding the sector table</span>
<a name="l00889"></a><a class="code" href="struct___t_m_p_q_file.html#a8f651cabc7c667c1c8dd1ecfb8c98a47">00889</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>        * <a class="code" href="struct___t_m_p_q_file.html#a8f651cabc7c667c1c8dd1ecfb8c98a47">SectorOffsets</a>;               <span class="comment">// Position of each file sector, relative to the begin of the file. Only for compressed files.</span>
<a name="l00890"></a><a class="code" href="struct___t_m_p_q_file.html#a011861a96609bbaff5761d252e730666">00890</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>        * <a class="code" href="struct___t_m_p_q_file.html#a011861a96609bbaff5761d252e730666">SectorChksums</a>;               <span class="comment">// Array of sector checksums (either ADLER32 or MD5) values for each file sector</span>
<a name="l00891"></a><a class="code" href="struct___t_m_p_q_file.html#abf6d716abdd4200f5d8c521037426952">00891</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#abf6d716abdd4200f5d8c521037426952">dwCompression0</a>;              <span class="comment">// Compression that will be used on the first file sector</span>
<a name="l00892"></a><a class="code" href="struct___t_m_p_q_file.html#a71eea3bbb14cc14292d50a9da9c9fc80">00892</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#a71eea3bbb14cc14292d50a9da9c9fc80">dwSectorCount</a>;               <span class="comment">// Number of sectors in the file</span>
<a name="l00893"></a><a class="code" href="struct___t_m_p_q_file.html#a4cb27c05051717b4126465a9383ed482">00893</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#a4cb27c05051717b4126465a9383ed482">dwPatchedFileSize</a>;           <span class="comment">// Size of patched file. Used when saving patch file to the MPQ</span>
<a name="l00894"></a><a class="code" href="struct___t_m_p_q_file.html#abb13213fd24c430f1910a8309fa13111">00894</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#abb13213fd24c430f1910a8309fa13111">dwDataSize</a>;                  <span class="comment">// Size of data in the file (on patch files, this differs from file size in block table entry)</span>
<a name="l00895"></a>00895 
<a name="l00896"></a><a class="code" href="struct___t_m_p_q_file.html#a7cc2d099a8ce390671c648a0f74c7ad5">00896</a>     <a class="code" href="_storm_port_8h.html#ac2d3fb16b5b34c1e6ab80014309020eb">LPBYTE</a>         <a class="code" href="struct___t_m_p_q_file.html#a7cc2d099a8ce390671c648a0f74c7ad5">pbFileSector</a>;                <span class="comment">// Last loaded file sector. For single unit files, entire file content</span>
<a name="l00897"></a><a class="code" href="struct___t_m_p_q_file.html#afd85541201e196d52db12d77cfd87d4b">00897</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#afd85541201e196d52db12d77cfd87d4b">dwSectorOffs</a>;                <span class="comment">// File position of currently loaded file sector</span>
<a name="l00898"></a><a class="code" href="struct___t_m_p_q_file.html#a25acde42740bb870757bceb889bdaa25">00898</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#a25acde42740bb870757bceb889bdaa25">dwSectorSize</a>;                <span class="comment">// Size of the file sector. For single unit files, this is equal to the file size</span>
<a name="l00899"></a>00899 
<a name="l00900"></a><a class="code" href="struct___t_m_p_q_file.html#a7926f5682725a2539de077cd8bf7c415">00900</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  <a class="code" href="struct___t_m_p_q_file.html#a7926f5682725a2539de077cd8bf7c415">hctx</a>[<a class="code" href="_storm_lib_8h.html#ad3abe583066c89c98b265ed473d95538">HASH_STATE_SIZE</a>];       <span class="comment">// Hash state for MD5. Used when saving file to MPQ</span>
<a name="l00901"></a><a class="code" href="struct___t_m_p_q_file.html#a16220616feed0b396742fe1feecb4d21">00901</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>          <a class="code" href="struct___t_m_p_q_file.html#a16220616feed0b396742fe1feecb4d21">dwCrc32</a>;                     <span class="comment">// CRC32 value, used when saving file to MPQ</span>
<a name="l00902"></a>00902 
<a name="l00903"></a><a class="code" href="struct___t_m_p_q_file.html#a1e1a8d268ffc5360f63b954b209cdaca">00903</a>     <span class="keywordtype">int</span>            <a class="code" href="struct___t_m_p_q_file.html#a1e1a8d268ffc5360f63b954b209cdaca">nAddFileError</a>;               <span class="comment">// Result of the &quot;Add File&quot; operations</span>
<a name="l00904"></a>00904 
<a name="l00905"></a><a class="code" href="struct___t_m_p_q_file.html#a300988418ccd5a80767b9d8fab012230">00905</a>     <span class="keywordtype">bool</span>           <a class="code" href="struct___t_m_p_q_file.html#a300988418ccd5a80767b9d8fab012230">bLoadedSectorCRCs</a>;           <span class="comment">// If true, we already tried to load sector CRCs</span>
<a name="l00906"></a><a class="code" href="struct___t_m_p_q_file.html#a7c3ebe367c666981a04423d16c28ef2a">00906</a>     <span class="keywordtype">bool</span>           <a class="code" href="struct___t_m_p_q_file.html#a7c3ebe367c666981a04423d16c28ef2a">bCheckSectorCRCs</a>;            <span class="comment">// If true, then SFileReadFile will check sector CRCs when reading the file</span>
<a name="l00907"></a><a class="code" href="struct___t_m_p_q_file.html#aab3e91574271fd7c8df43361fe74a4be">00907</a>     <span class="keywordtype">bool</span>           <a class="code" href="struct___t_m_p_q_file.html#aab3e91574271fd7c8df43361fe74a4be">bIsWriteHandle</a>;              <span class="comment">// If true, this handle has been created by SFileCreateFile</span>
<a name="l00908"></a>00908 } <a class="code" href="_storm_lib_8h.html#a533b6df2fe415e010d7cf274eddd44b7">TMPQFile</a>;
<a name="l00909"></a>00909 
<a name="l00910"></a>00910 <span class="comment">// Structure for SFileFindFirstFile and SFileFindNextFile</span>
<a name="l00911"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html">00911</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html">_SFILE_FIND_DATA</a>
<a name="l00912"></a>00912 {
<a name="l00913"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a9ae6998520897bcbbb9fd9971bce2d1e">00913</a>     <span class="keywordtype">char</span>   <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a9ae6998520897bcbbb9fd9971bce2d1e">cFileName</a>[MAX_PATH];                 <span class="comment">// Full name of the found file</span>
<a name="l00914"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#acad9ea60b6c9fd4f11b2d61a7c0f6c44">00914</a>     <span class="keywordtype">char</span> * <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#acad9ea60b6c9fd4f11b2d61a7c0f6c44">szPlainName</a>;                         <span class="comment">// Plain name of the found file</span>
<a name="l00915"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a49c3c9ed799f0d23ea79af3970f80d09">00915</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>  <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a49c3c9ed799f0d23ea79af3970f80d09">dwHashIndex</a>;                         <span class="comment">// Hash table index for the file</span>
<a name="l00916"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#aceb44de563a1ba438b152c907f221e7e">00916</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>  <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#aceb44de563a1ba438b152c907f221e7e">dwBlockIndex</a>;                        <span class="comment">// Block table index for the file</span>
<a name="l00917"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a29ea5967ac3e3ea1b26bf1d096a47bd8">00917</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>  <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a29ea5967ac3e3ea1b26bf1d096a47bd8">dwFileSize</a>;                          <span class="comment">// File size in bytes</span>
<a name="l00918"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a55ae9a234febc8889922d7f5c249fc45">00918</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>  <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a55ae9a234febc8889922d7f5c249fc45">dwFileFlags</a>;                         <span class="comment">// MPQ file flags</span>
<a name="l00919"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a13db68938ced83dd70531c784efc52e6">00919</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>  <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a13db68938ced83dd70531c784efc52e6">dwCompSize</a>;                          <span class="comment">// Compressed file size</span>
<a name="l00920"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a4d88c2f67b387c39d908da51baf70314">00920</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>  <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a4d88c2f67b387c39d908da51baf70314">dwFileTimeLo</a>;                        <span class="comment">// Low 32-bits of the file time (0 if not present)</span>
<a name="l00921"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#ab1c026d07534f257c1e2534f535aea61">00921</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>  <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#ab1c026d07534f257c1e2534f535aea61">dwFileTimeHi</a>;                        <span class="comment">// High 32-bits of the file time (0 if not present)</span>
<a name="l00922"></a><a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a0a74d2a35cd9465d77bc04b1f14e4f08">00922</a>     <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a>   <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html#a0a74d2a35cd9465d77bc04b1f14e4f08">lcLocale</a>;                            <span class="comment">// Locale version</span>
<a name="l00923"></a>00923 
<a name="l00924"></a>00924 } <a class="code" href="_storm_lib_8h.html#a87ff0e6035ccc1ba74b9de67baaf369f">SFILE_FIND_DATA</a>, *<a class="code" href="_storm_lib_8h.html#a868c53c463cdc7f0bf83c41993c5eb54">PSFILE_FIND_DATA</a>;
<a name="l00925"></a>00925 
<a name="l00926"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html">00926</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html">_SFILE_CREATE_MPQ</a>
<a name="l00927"></a>00927 {
<a name="l00928"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a2e861f6af56a959a5ca7c7adbe89ce37">00928</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a2e861f6af56a959a5ca7c7adbe89ce37">cbSize</a>;                               <span class="comment">// Size of this structure, in bytes</span>
<a name="l00929"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a45c20ded0f59884ca1452b3f43337622">00929</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a45c20ded0f59884ca1452b3f43337622">dwMpqVersion</a>;                         <span class="comment">// Version of the MPQ to be created</span>
<a name="l00930"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#ad3e941c308c10bc43ff86d280e4fb3e1">00930</a>     <span class="keywordtype">void</span> *<a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#ad3e941c308c10bc43ff86d280e4fb3e1">pvUserData</a>;                           <span class="comment">// Reserved, must be NULL</span>
<a name="l00931"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a6a527a17447440fa3862df9e87e522c5">00931</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a6a527a17447440fa3862df9e87e522c5">cbUserData</a>;                           <span class="comment">// Reserved, must be 0</span>
<a name="l00932"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a11489f71fac072b853faa0d3144b54f2">00932</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a11489f71fac072b853faa0d3144b54f2">dwStreamFlags</a>;                        <span class="comment">// Stream flags for creating the MPQ</span>
<a name="l00933"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a42d424e0654461277740fac26d34d442">00933</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a42d424e0654461277740fac26d34d442">dwFileFlags1</a>;                         <span class="comment">// File flags for (listfile). 0 = default</span>
<a name="l00934"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#af146b83571bae3e349b599536f66f270">00934</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#af146b83571bae3e349b599536f66f270">dwFileFlags2</a>;                         <span class="comment">// File flags for (attributes). 0 = default</span>
<a name="l00935"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a46f1fa8776f0c23327b6f48bd0631927">00935</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a46f1fa8776f0c23327b6f48bd0631927">dwAttrFlags</a>;                          <span class="comment">// Flags for the (attributes) file. If 0, no attributes will be created</span>
<a name="l00936"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a3d967c366baacbc621aa752ed32a3751">00936</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a3d967c366baacbc621aa752ed32a3751">dwSectorSize</a>;                         <span class="comment">// Sector size for compressed files</span>
<a name="l00937"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a14e831b4a6dd34b1402bd7b551e3b9ca">00937</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#a14e831b4a6dd34b1402bd7b551e3b9ca">dwRawChunkSize</a>;                       <span class="comment">// Size of raw data chunk</span>
<a name="l00938"></a><a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#afaa8856c329f8175c094c907e1660dad">00938</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___s_f_i_l_e___c_r_e_a_t_e___m_p_q.html#afaa8856c329f8175c094c907e1660dad">dwMaxFileCount</a>;                       <span class="comment">// File limit for the MPQ</span>
<a name="l00939"></a>00939 
<a name="l00940"></a>00940 } <a class="code" href="_storm_lib_8h.html#a80037db6483e8bbd003a556603b8c2ec">SFILE_CREATE_MPQ</a>, *<a class="code" href="_storm_lib_8h.html#a97df30ed85f80d5c8fe560750b3efe4a">PSFILE_CREATE_MPQ</a>;
<a name="l00941"></a>00941 
<a name="l00942"></a>00942 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00943"></a>00943 <span class="comment">// Stream support - functions</span>
<a name="l00944"></a>00944 
<a name="l00945"></a>00945 <span class="comment">// Structure used by FileStream_GetBitmap</span>
<a name="l00946"></a><a class="code" href="struct___t_stream_bitmap.html">00946</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___t_stream_bitmap.html">_TStreamBitmap</a>
<a name="l00947"></a>00947 {
<a name="l00948"></a><a class="code" href="struct___t_stream_bitmap.html#a68b01a4b8bd0e60778c23012abb016a7">00948</a>     <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> <a class="code" href="struct___t_stream_bitmap.html#a68b01a4b8bd0e60778c23012abb016a7">StreamSize</a>;                       <span class="comment">// Size of the stream, in bytes</span>
<a name="l00949"></a><a class="code" href="struct___t_stream_bitmap.html#ae9f517bedab9b2b61cb06a4edb24b59a">00949</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_stream_bitmap.html#ae9f517bedab9b2b61cb06a4edb24b59a">BitmapSize</a>;                           <span class="comment">// Size of the block map, in bytes</span>
<a name="l00950"></a><a class="code" href="struct___t_stream_bitmap.html#aae3d203833e4df8aa49eb752e8d40f80">00950</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_stream_bitmap.html#aae3d203833e4df8aa49eb752e8d40f80">BlockCount</a>;                           <span class="comment">// Number of blocks in the stream</span>
<a name="l00951"></a><a class="code" href="struct___t_stream_bitmap.html#a7b327b21867b0504b91780da72a0b322">00951</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_stream_bitmap.html#a7b327b21867b0504b91780da72a0b322">BlockSize</a>;                            <span class="comment">// Size of one block</span>
<a name="l00952"></a><a class="code" href="struct___t_stream_bitmap.html#a30279656970bc4e46246ebabffb88848">00952</a>     <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="struct___t_stream_bitmap.html#a30279656970bc4e46246ebabffb88848">IsComplete</a>;                           <span class="comment">// Nonzero if the file is complete</span>
<a name="l00953"></a>00953 
<a name="l00954"></a>00954     <span class="comment">// Followed by the BYTE array, each bit means availability of one block</span>
<a name="l00955"></a>00955 
<a name="l00956"></a>00956 } <a class="code" href="_storm_lib_8h.html#ad3240e9e620cba6a0222814de65f617f">TStreamBitmap</a>;
<a name="l00957"></a>00957 
<a name="l00958"></a>00958 <span class="comment">// UNICODE versions of the file access functions</span>
<a name="l00959"></a>00959 <a class="code" href="struct_t_file_stream.html">TFileStream</a> * <a class="code" href="_file_stream_8cpp.html#a002962f324415b3de7002c50292ebae0">FileStream_CreateFile</a>(<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szFileName, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwStreamFlags);
<a name="l00960"></a>00960 <a class="code" href="struct_t_file_stream.html">TFileStream</a> * <a class="code" href="_file_stream_8cpp.html#a48fa8de054ca2c1a69995494237ee94b">FileStream_OpenFile</a>(<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szFileName, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwStreamFlags);
<a name="l00961"></a>00961 <span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * <a class="code" href="_file_stream_8cpp.html#a900badc0a3d7dff123d1c8a0b45c3c70">FileStream_GetFileName</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream);
<a name="l00962"></a>00962 <span class="keywordtype">size_t</span> <a class="code" href="_file_stream_8cpp.html#aa2107608d75af5dc5674f69c84637e22">FileStream_Prefix</a>(<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szFileName, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> * pdwProvider);
<a name="l00963"></a>00963 
<a name="l00964"></a>00964 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#ae33c8e38a5379adbbe49471f8d0ca5af">FileStream_SetCallback</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_lib_8h.html#aa7d6a26f9fa999e583ee66390dfe04fe">SFILE_DOWNLOAD_CALLBACK</a> pfnCallback, <span class="keywordtype">void</span> * pvUserData);
<a name="l00965"></a>00965 
<a name="l00966"></a>00966 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#a079730e5345bc1141a1057d4e13e95ac">FileStream_GetBitmap</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <span class="keywordtype">void</span> * pvBitmap, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> cbBitmap, <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a> pcbLengthNeeded);
<a name="l00967"></a>00967 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#a593f3b1416f7497c28fa5552cd1b3003">FileStream_Read</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> * pByteOffset, <span class="keywordtype">void</span> * pvBuffer, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwBytesToRead);
<a name="l00968"></a>00968 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#a36307955e8de92f5ea26be07ea3b9cb4">FileStream_Write</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> * pByteOffset, <span class="keyword">const</span> <span class="keywordtype">void</span> * pvBuffer, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> dwBytesToWrite);
<a name="l00969"></a>00969 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#abc0fbb4156c7eef2e3162841ffb0d74a">FileStream_SetSize</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> NewFileSize);
<a name="l00970"></a>00970 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#af505319882f0f4aaf396b6d061a2275b">FileStream_GetSize</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> * pFileSize);
<a name="l00971"></a>00971 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#a4cda734fc220ab4b32e1f2bf9b5446fc">FileStream_GetPos</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> * pByteOffset);
<a name="l00972"></a>00972 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#a4ea733800d58589cd80948dd23421dad">FileStream_GetTime</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> * pFT);
<a name="l00973"></a>00973 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#a3b0eb2320c6401f6f1b5a92e53bc57dd">FileStream_GetFlags</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a> pdwStreamFlags);
<a name="l00974"></a>00974 <span class="keywordtype">bool</span> <a class="code" href="_file_stream_8cpp.html#afcf883cb4bc8ff873bb286e8f7bf5002">FileStream_Replace</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream, <a class="code" href="struct_t_file_stream.html">TFileStream</a> * pNewStream);
<a name="l00975"></a>00975 <span class="keywordtype">void</span> <a class="code" href="_file_stream_8cpp.html#ae8b75c4797726e9c5ee0b4b03bf31442">FileStream_Close</a>(<a class="code" href="struct_t_file_stream.html">TFileStream</a> * pStream);
<a name="l00976"></a>00976 
<a name="l00977"></a>00977 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00978"></a>00978 <span class="comment">// Functions prototypes for Storm.dll</span>
<a name="l00979"></a>00979 
<a name="l00980"></a>00980 <span class="comment">// Typedefs for functions exported by Storm.dll</span>
<a name="l00981"></a><a class="code" href="_storm_lib_8h.html#a8cda6bb51a41918f2c44e577eb84fb38">00981</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a>  (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#a8cda6bb51a41918f2c44e577eb84fb38">SFILESETLOCALE</a>)(<a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a>);
<a name="l00982"></a><a class="code" href="_storm_lib_8h.html#a908eb5366f0e0cbeee71b427baece7f0">00982</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>  (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#a908eb5366f0e0cbeee71b427baece7f0">SFILEOPENARCHIVE</a>)(<span class="keyword">const</span> <span class="keywordtype">char</span> *, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>, <a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a> *);
<a name="l00983"></a><a class="code" href="_storm_lib_8h.html#aeb661eb274aad413f427405601a7b8ae">00983</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>  (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#aeb661eb274aad413f427405601a7b8ae">SFILECLOSEARCHIVE</a>)(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a>);
<a name="l00984"></a><a class="code" href="_storm_lib_8h.html#a224f8fad615f62522d5d43f1408dafaa">00984</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>  (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#a224f8fad615f62522d5d43f1408dafaa">SFILEOPENFILEEX</a>)(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>, HANDLE *);
<a name="l00985"></a><a class="code" href="_storm_lib_8h.html#afed629eddab1f179f109b7d3cfaaa762">00985</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>  (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#afed629eddab1f179f109b7d3cfaaa762">SFILECLOSEFILE</a>)(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a>);
<a name="l00986"></a><a class="code" href="_storm_lib_8h.html#a65ecf4cca08603e52e497149bd8733c9">00986</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#a65ecf4cca08603e52e497149bd8733c9">SFILEGETFILESIZE</a>)(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a>);
<a name="l00987"></a><a class="code" href="_storm_lib_8h.html#a0774389ec43fbcc46f073d6ca838c2e6">00987</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#a0774389ec43fbcc46f073d6ca838c2e6">SFILESETFILEPOINTER</a>)(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, <a class="code" href="_storm_port_8h.html#a9154c0d0c21af4686624543215b4e5f2">LONG</a>, LONG *, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>);
<a name="l00988"></a><a class="code" href="_storm_lib_8h.html#a2b073e9703b110321e0a7e1bb952fa37">00988</a> <span class="keyword">typedef</span> <a class="code" href="_storm_port_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>  (<a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> * <a class="code" href="_storm_lib_8h.html#a2b073e9703b110321e0a7e1bb952fa37">SFILEREADFILE</a>)(<a class="code" href="_storm_port_8h.html#aa8c0374618b33785ccb02f74bcfebc46">HANDLE</a>, <span class="keywordtype">void</span> *, <a class="code" href="_storm_port_8h.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>, <a class="code" href="_storm_port_8h.html#a143be739596851314f3c386bd6f752f9">LPDWORD</a>, <a class="code" href="_storm_port_8h.html#adfd8166ccad505199a5bf3b5fb0ec8d8">LPOVERLAPPED</a>);
<a name="l00989"></a>00989 
<a name="l00990"></a>00990 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00991"></a>00991 <span class="comment">// Functions for manipulation with StormLib global flags</span>
<a name="l00992"></a>00992 
<a name="l00993"></a>00993 <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_archive_8cpp.html#a2c9950c2f8316507888d5b1245e7bebc">SFileGetLocale</a>();
<a name="l00994"></a>00994 <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_archive_8cpp.html#a284666dbec699c0e345fb91913c353a4">SFileSetLocale</a>(<a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcNewLocale);
<a name="l00995"></a>00995 
<a name="l00996"></a>00996 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00997"></a>00997 <span class="comment">// Functions for archive manipulation</span>
<a name="l00998"></a>00998 
<a name="l00999"></a>00999 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_archive_8cpp.html#a8b031afa4f88b4b3705c274a0b5b4f73">SFileOpenArchive</a>(<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szMpqName, DWORD dwPriority, DWORD dwFlags, HANDLE * phMpq);
<a name="l01000"></a>01000 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_create_archive_8cpp.html#a11342f379ed88e7b54873f1f53feb773">SFileCreateArchive</a>(<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szMpqName, DWORD dwCreateFlags, DWORD dwMaxFileCount, HANDLE * phMpq);
<a name="l01001"></a>01001 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_create_archive_8cpp.html#aa2b6fa8f16b5ac42868c546533fe26ce">SFileCreateArchive2</a>(<span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szMpqName, PSFILE_CREATE_MPQ pCreateInfo, HANDLE * phMpq);
<a name="l01002"></a>01002 
<a name="l01003"></a>01003 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_archive_8cpp.html#a32a52c97aba08f40e5a2933d66cceb02">SFileSetDownloadCallback</a>(HANDLE hMpq, <a class="code" href="_storm_lib_8h.html#aa7d6a26f9fa999e583ee66390dfe04fe">SFILE_DOWNLOAD_CALLBACK</a> DownloadCB, <span class="keywordtype">void</span> * pvUserData);
<a name="l01004"></a>01004 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_archive_8cpp.html#a5f3daefb5c0d87a791fcc42ec40714d2">SFileFlushArchive</a>(HANDLE hMpq);
<a name="l01005"></a>01005 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_archive_8cpp.html#abe1ae9917ea665286bffd1524561fceb">SFileCloseArchive</a>(HANDLE hMpq);
<a name="l01006"></a>01006 
<a name="l01007"></a>01007 <span class="comment">// Adds another listfile into MPQ. The currently added listfile(s) remain,</span>
<a name="l01008"></a>01008 <span class="comment">// so you can use this API to combining more listfiles.</span>
<a name="l01009"></a>01009 <span class="comment">// Note that this function is internally called by SFileFindFirstFile</span>
<a name="l01010"></a>01010 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_list_file_8cpp.html#a0ec28be0ab973f3799b5c08d08659692">SFileAddListFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szListFile);
<a name="l01011"></a>01011 
<a name="l01012"></a>01012 <span class="comment">// Archive compacting</span>
<a name="l01013"></a>01013 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_compact_archive_8cpp.html#a33c3791deded53583e93c9ec86dd1189">SFileSetCompactCallback</a>(HANDLE hMpq, <a class="code" href="_storm_lib_8h.html#a2a42639b325f48193ab2b5e0ef4b2800">SFILE_COMPACT_CALLBACK</a> CompactCB, <span class="keywordtype">void</span> * pvUserData);
<a name="l01014"></a>01014 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_compact_archive_8cpp.html#a331ac3dbb6725117407fe699734690ce">SFileCompactArchive</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szListFile, <span class="keywordtype">bool</span> bReserved);
<a name="l01015"></a>01015 
<a name="l01016"></a>01016 <span class="comment">// Changing the maximum file count</span>
<a name="l01017"></a>01017 DWORD  <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_compact_archive_8cpp.html#a04e66295252e3b1f4b36a010941127f8">SFileGetMaxFileCount</a>(HANDLE hMpq);
<a name="l01018"></a>01018 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_compact_archive_8cpp.html#aa0066fc17b79fdbd976230a7d395d731">SFileSetMaxFileCount</a>(HANDLE hMpq, DWORD dwMaxFileCount);
<a name="l01019"></a>01019 
<a name="l01020"></a>01020 <span class="comment">// Changing (attributes) file</span>
<a name="l01021"></a>01021 DWORD  <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_attributes_8cpp.html#ae189da614befca23b053c36b9f93f460">SFileGetAttributes</a>(HANDLE hMpq);
<a name="l01022"></a>01022 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_attributes_8cpp.html#ad8c8767ef66fc69dad98bd3a88f67def">SFileSetAttributes</a>(HANDLE hMpq, DWORD dwFlags);
<a name="l01023"></a>01023 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_attributes_8cpp.html#a7f66db40266cb2d78416b2f9cc2804ba">SFileUpdateFileAttributes</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);
<a name="l01024"></a>01024 
<a name="l01025"></a>01025 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01026"></a>01026 <span class="comment">// Functions for manipulation with patch archives</span>
<a name="l01027"></a>01027 
<a name="l01028"></a>01028 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_patch_archives_8cpp.html#a6daebdc66320d44284e960bbff33e886">SFileOpenPatchArchive</a>(HANDLE hMpq, <span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szPatchMpqName, <span class="keyword">const</span> <span class="keywordtype">char</span> * szPatchPathPrefix, DWORD dwFlags);
<a name="l01029"></a>01029 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_patch_archives_8cpp.html#a485461c38e347d9f3de4348e81bca043">SFileIsPatchedArchive</a>(HANDLE hMpq);
<a name="l01030"></a>01030 
<a name="l01031"></a>01031 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01032"></a>01032 <span class="comment">// Functions for file manipulation</span>
<a name="l01033"></a>01033 
<a name="l01034"></a>01034 <span class="comment">// Reading from MPQ file</span>
<a name="l01035"></a>01035 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_file_ex_8cpp.html#a7fb756b76326ffec7dbe07e4167490c0">SFileHasFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);
<a name="l01036"></a>01036 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_file_ex_8cpp.html#af9090bd528ef09a1c58bdb3931be5ec3">SFileOpenFileEx</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, DWORD dwSearchScope, HANDLE * phFile);
<a name="l01037"></a>01037 DWORD  <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_read_file_8cpp.html#a1d30c5a49fb9c1c1669884646282e4d3">SFileGetFileSize</a>(HANDLE hFile, LPDWORD pdwFileSizeHigh);
<a name="l01038"></a>01038 DWORD  <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_read_file_8cpp.html#a6e34d029cecd26331b44985dd5622927">SFileSetFilePointer</a>(HANDLE hFile, LONG lFilePos, LONG * plFilePosHigh, DWORD dwMoveMethod);
<a name="l01039"></a>01039 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_read_file_8cpp.html#a3c81a68cbecef70ab57c9d3145ef8b7d">SFileReadFile</a>(HANDLE hFile, <span class="keywordtype">void</span> * lpBuffer, DWORD dwToRead, LPDWORD pdwRead, <a class="code" href="_storm_port_8h.html#adfd8166ccad505199a5bf3b5fb0ec8d8">LPOVERLAPPED</a> lpOverlapped);
<a name="l01040"></a>01040 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_file_ex_8cpp.html#a49a09a38e6dc3b1afd95163a1c9052c6">SFileCloseFile</a>(HANDLE hFile);
<a name="l01041"></a>01041 
<a name="l01042"></a>01042 <span class="comment">// Retrieving info about a file in the archive</span>
<a name="l01043"></a>01043 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_get_file_info_8cpp.html#a65c5c13489a621c481282da76b101e16">SFileGetFileInfo</a>(HANDLE hMpqOrFile, <a class="code" href="_storm_lib_8h.html#a6baae4ba5804d36bbcb51e02bfac1a0b">SFileInfoClass</a> InfoClass, <span class="keywordtype">void</span> * pvFileInfo, DWORD cbFileInfo, LPDWORD pcbLengthNeeded);
<a name="l01044"></a>01044 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_get_file_info_8cpp.html#a3909beee4f92f439ad52faef54a6a296">SFileGetFileName</a>(HANDLE hFile, <span class="keywordtype">char</span> * szFileName);
<a name="l01045"></a>01045 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_get_file_info_8cpp.html#ae8ebf606a756cf0bbd7c3670ac7d0b7f">SFileFreeFileInfo</a>(<span class="keywordtype">void</span> * pvFileInfo, <a class="code" href="_storm_lib_8h.html#a6baae4ba5804d36bbcb51e02bfac1a0b">SFileInfoClass</a> InfoClass);
<a name="l01046"></a>01046 
<a name="l01047"></a>01047 <span class="comment">// High-level extract function</span>
<a name="l01048"></a>01048 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_extract_file_8cpp.html#a25532910e8392ffc4b5fd57878d67316">SFileExtractFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szToExtract, <span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szExtracted, DWORD dwSearchScope);
<a name="l01049"></a>01049 
<a name="l01050"></a>01050 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01051"></a>01051 <span class="comment">// Functions for file and archive verification</span>
<a name="l01052"></a>01052 
<a name="l01053"></a>01053 <span class="comment">// Generates file CRC32</span>
<a name="l01054"></a>01054 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_verify_8cpp.html#a2dd23cd4dc08bc726ec9d4a41152b6ec">SFileGetFileChecksums</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, LPDWORD pdwCrc32, <span class="keywordtype">char</span> * pMD5);
<a name="l01055"></a>01055 
<a name="l01056"></a>01056 <span class="comment">// Verifies file against its checksums stored in (attributes) attributes (depending on dwFlags).</span>
<a name="l01057"></a>01057 <span class="comment">// For dwFlags, use one or more of MPQ_ATTRIBUTE_MD5</span>
<a name="l01058"></a>01058 DWORD  <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_verify_8cpp.html#a1bb21d44888e21c7525298bbfcef1ba2">SFileVerifyFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, DWORD dwFlags);
<a name="l01059"></a>01059 
<a name="l01060"></a>01060 <span class="comment">// Verifies raw data of the archive. Only works for MPQs version 4 or newer</span>
<a name="l01061"></a>01061 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_verify_8cpp.html#aa21f6b77da80e04edc92c377a8878dd7">SFileVerifyRawData</a>(HANDLE hMpq, DWORD dwWhatToVerify, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName);
<a name="l01062"></a>01062 
<a name="l01063"></a>01063 <span class="comment">// Verifies the signature, if present</span>
<a name="l01064"></a>01064 DWORD  <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_verify_8cpp.html#a5d1f891bd3e6c98a94a13cc5745ae6f4">SFileVerifyArchive</a>(HANDLE hMpq);
<a name="l01065"></a>01065 
<a name="l01066"></a>01066 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01067"></a>01067 <span class="comment">// Functions for file searching</span>
<a name="l01068"></a>01068 
<a name="l01069"></a>01069 HANDLE <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_find_file_8cpp.html#a65f0e9dd2e12c8fa043c14218b9fbea9">SFileFindFirstFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szMask, <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html">SFILE_FIND_DATA</a> * lpFindFileData, <span class="keyword">const</span> <span class="keywordtype">char</span> * szListFile);
<a name="l01070"></a>01070 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_find_file_8cpp.html#a9a04c684ebc812ab085d9615d1bce183">SFileFindNextFile</a>(HANDLE hFind, <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html">SFILE_FIND_DATA</a> * lpFindFileData);
<a name="l01071"></a>01071 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_find_file_8cpp.html#a33ff6856104b147ef82a90e86699ca15">SFileFindClose</a>(HANDLE hFind);
<a name="l01072"></a>01072 
<a name="l01073"></a>01073 HANDLE <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_list_file_8cpp.html#a36dc66999a9e3fc82b83153fe8f1dc0c">SListFileFindFirstFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szListFile, <span class="keyword">const</span> <span class="keywordtype">char</span> * szMask, <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html">SFILE_FIND_DATA</a> * lpFindFileData);
<a name="l01074"></a>01074 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_list_file_8cpp.html#a391fb032f484224b1aa8989663f9357a">SListFileFindNextFile</a>(HANDLE hFind, <a class="code" href="struct___s_f_i_l_e___f_i_n_d___d_a_t_a.html">SFILE_FIND_DATA</a> * lpFindFileData);
<a name="l01075"></a>01075 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_list_file_8cpp.html#a7c9b409ac37f567dd42aed8be7dee6eb">SListFileFindClose</a>(HANDLE hFind);
<a name="l01076"></a>01076 
<a name="l01077"></a>01077 <span class="comment">// Locale support</span>
<a name="l01078"></a>01078 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_open_file_ex_8cpp.html#a35ff00416654849dd5c18b9906f27d65">SFileEnumLocales</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> * plcLocales, LPDWORD pdwMaxLocales, DWORD dwSearchScope);
<a name="l01079"></a>01079 
<a name="l01080"></a>01080 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01081"></a>01081 <span class="comment">// Support for adding files to the MPQ</span>
<a name="l01082"></a>01082 
<a name="l01083"></a>01083 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#ae3ab9ea48707f8edb0decb7fef53e896">SFileCreateFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szArchivedName, <a class="code" href="_storm_port_8h.html#abb9abb9ce956f1a9e5a4081ac40e5649">ULONGLONG</a> FileTime, DWORD dwFileSize, <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcLocale, DWORD dwFlags, HANDLE * phFile);
<a name="l01084"></a>01084 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a70c78df25d758e53550021e82078352e">SFileWriteFile</a>(HANDLE hFile, <span class="keyword">const</span> <span class="keywordtype">void</span> * pvData, DWORD dwSize, DWORD dwCompression);
<a name="l01085"></a>01085 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a7829275dccf80bbf47758ebd5515349a">SFileFinishFile</a>(HANDLE hFile);
<a name="l01086"></a>01086 
<a name="l01087"></a>01087 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a9d092079ada150e05bfed5a26e65e184">SFileAddFileEx</a>(HANDLE hMpq, <span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szFileName, <span class="keyword">const</span> <span class="keywordtype">char</span> * szArchivedName, DWORD dwFlags, DWORD dwCompression, DWORD dwCompressionNext);
<a name="l01088"></a>01088 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#ab6184a31092ac5364a8746b1fca3a822">SFileAddFile</a>(HANDLE hMpq, <span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szFileName, <span class="keyword">const</span> <span class="keywordtype">char</span> * szArchivedName, DWORD dwFlags); 
<a name="l01089"></a>01089 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a4cc5ee53bb9a41f91d71a0be809ede22">SFileAddWave</a>(HANDLE hMpq, <span class="keyword">const</span> <a class="code" href="_storm_port_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> * szFileName, <span class="keyword">const</span> <span class="keywordtype">char</span> * szArchivedName, DWORD dwFlags, DWORD dwQuality); 
<a name="l01090"></a>01090 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a78b84dd7671288c4fa62d0ae748b831d">SFileRemoveFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szFileName, DWORD dwSearchScope);
<a name="l01091"></a>01091 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a8cc10a63d01756612d5579186a0b5e0b">SFileRenameFile</a>(HANDLE hMpq, <span class="keyword">const</span> <span class="keywordtype">char</span> * szOldFileName, <span class="keyword">const</span> <span class="keywordtype">char</span> * szNewFileName);
<a name="l01092"></a>01092 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a7b5145c080be1df3647b57e93454a7fb">SFileSetFileLocale</a>(HANDLE hFile, <a class="code" href="_storm_port_8h.html#ab1742dccc5f422e3ca4eee21d56e0086">LCID</a> lcNewLocale);
<a name="l01093"></a>01093 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#ab8a9149a71da405f906dd388f77ceb0c">SFileSetDataCompression</a>(DWORD DataCompression);
<a name="l01094"></a>01094 
<a name="l01095"></a>01095 <span class="keywordtype">bool</span>   <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_file_add_file_8cpp.html#a680ef09a7f9c363c2373b822152ab6b6">SFileSetAddFileCallback</a>(HANDLE hMpq, <a class="code" href="_storm_lib_8h.html#aa079b6d9f0e997a0b4dff53ad112f603">SFILE_ADDFILE_CALLBACK</a> AddFileCB, <span class="keywordtype">void</span> * pvUserData);
<a name="l01096"></a>01096 
<a name="l01097"></a>01097 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01098"></a>01098 <span class="comment">// Compression and decompression</span>
<a name="l01099"></a>01099 
<a name="l01100"></a>01100 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_compression_8cpp.html#a430149429a94672d6363426736e6371f">SCompImplode</a>    (<span class="keywordtype">void</span> * pvOutBuffer, <span class="keywordtype">int</span> * pcbOutBuffer, <span class="keywordtype">void</span> * pvInBuffer, <span class="keywordtype">int</span> cbInBuffer);
<a name="l01101"></a>01101 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_compression_8cpp.html#aef9de212ebb17b38d8c1efbbdfeafac4">SCompExplode</a>    (<span class="keywordtype">void</span> * pvOutBuffer, <span class="keywordtype">int</span> * pcbOutBuffer, <span class="keywordtype">void</span> * pvInBuffer, <span class="keywordtype">int</span> cbInBuffer);
<a name="l01102"></a>01102 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_compression_8cpp.html#a309e1b309f67df0c6d12e6df83a4219a">SCompCompress</a>   (<span class="keywordtype">void</span> * pvOutBuffer, <span class="keywordtype">int</span> * pcbOutBuffer, <span class="keywordtype">void</span> * pvInBuffer, <span class="keywordtype">int</span> cbInBuffer, <span class="keywordtype">unsigned</span> uCompressionMask, <span class="keywordtype">int</span> nCmpType, <span class="keywordtype">int</span> nCmpLevel);
<a name="l01103"></a>01103 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_compression_8cpp.html#a6039b3fb0d4ac8ff528aaa7fcdbb5328">SCompDecompress</a> (<span class="keywordtype">void</span> * pvOutBuffer, <span class="keywordtype">int</span> * pcbOutBuffer, <span class="keywordtype">void</span> * pvInBuffer, <span class="keywordtype">int</span> cbInBuffer);
<a name="l01104"></a>01104 <span class="keywordtype">int</span>    <a class="code" href="_storm_port_8h.html#a9aa60e1ead64be77ad551e745cbfd4d3">WINAPI</a> <a class="code" href="_s_compression_8cpp.html#ad4be5c65706a57411d71edd72bd91e06">SCompDecompress2</a>(<span class="keywordtype">void</span> * pvOutBuffer, <span class="keywordtype">int</span> * pcbOutBuffer, <span class="keywordtype">void</span> * pvInBuffer, <span class="keywordtype">int</span> cbInBuffer);
<a name="l01105"></a>01105 
<a name="l01106"></a>01106 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01107"></a>01107 <span class="comment">// Non-Windows support for SetLastError/GetLastError</span>
<a name="l01108"></a>01108 
<a name="l01109"></a>01109 <span class="preprocessor">#ifndef PLATFORM_WINDOWS</span>
<a name="l01110"></a>01110 <span class="preprocessor"></span>
<a name="l01111"></a>01111 <span class="keywordtype">void</span>  <a class="code" href="_file_stream_8cpp.html#ae12246cf2f9f9aa8e3a6367bd9fa2aed">SetLastError</a>(<span class="keywordtype">int</span> err);
<a name="l01112"></a>01112 <span class="keywordtype">int</span>   <a class="code" href="_file_stream_8cpp.html#a10b9a284527af83a44533867b0aff0fc">GetLastError</a>();
<a name="l01113"></a>01113 
<a name="l01114"></a>01114 <span class="preprocessor">#endif</span>
<a name="l01115"></a>01115 <span class="preprocessor"></span>
<a name="l01116"></a>01116 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l01117"></a>01117 <span class="comment">// Functions from Storm.dll. They use slightly different names for keeping</span>
<a name="l01118"></a>01118 <span class="comment">// possibility to use them together with StormLib (StormXXX instead of SFileXXX)</span>
<a name="l01119"></a>01119 
<a name="l01120"></a>01120 <span class="preprocessor">#ifdef __LINK_STORM_DLL__</span>
<a name="l01121"></a>01121 <span class="preprocessor"></span><span class="preprocessor">  #define STORM_ALTERNATE_NAMES         // Force storm_dll.h to use alternate fnc names</span>
<a name="l01122"></a>01122 <span class="preprocessor"></span><span class="preprocessor">  #include &quot;..\storm_dll\storm_dll.h&quot;</span>
<a name="l01123"></a>01123 <span class="preprocessor">#endif // __LINK_STORM_DLL__</span>
<a name="l01124"></a>01124 <span class="preprocessor"></span>
<a name="l01125"></a>01125 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l01126"></a>01126 <span class="preprocessor"></span>}   <span class="comment">// extern &quot;C&quot;</span>
<a name="l01127"></a>01127 <span class="preprocessor">#endif</span>
<a name="l01128"></a>01128 <span class="preprocessor"></span>
<a name="l01129"></a>01129 <span class="preprocessor">#endif  // __STORMLIB_H__</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
